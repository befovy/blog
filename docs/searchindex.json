{"categories":[],"posts":[{"content":"æœ¬æ–‡æ˜¯ä¸€ç¯‡ç¿»è¯‘æ–‡ç« : https://blog.golang.org/v2-go-modules åŸæ–‡ä½œè€…ï¼šJean de Klerk å’Œ Tyler Bui-Palsu è¯‘è€…ï¼šbefovy æ ¡å¯¹ï¼špolaris1119 è¯‘æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGoè¯­è¨€ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n ç®€ä»‹ æœ¬æ–‡æ˜¯ Go modules ç³»ç»Ÿçš„ç¬¬å››éƒ¨åˆ†\n Part 1: ä½¿ç”¨ Go Modules è¯‘æ–‡ Part 2: è¿ç§»åˆ° Go Modules è¯‘æ–‡ Part 3: å‘å¸ƒ Go Modules è¯‘æ–‡ Part 4: Go Modules : v2 åŠæ›´é«˜ç‰ˆæœ¬Â (æœ¬æ–‡)Â   éšç€æˆåŠŸçš„é¡¹ç›®é€æ¸æˆç†Ÿä»¥åŠæ–°éœ€æ±‚çš„åŠ å…¥ï¼Œæ—©æœŸçš„åŠŸèƒ½å’Œè®¾è®¡å†³ç­–å¯èƒ½ä¸å†é€‚ç”¨ã€‚ å¼€å‘è€…ä»¬å¯èƒ½å¸Œæœ›é€šè¿‡åˆ é™¤åºŸå¼ƒä½¿ç”¨çš„åŠŸèƒ½ã€é‡å‘½åç±»å‹æˆ–å°†å¤æ‚çš„ç¨‹åºæ‹†åˆ†ä¸ºå¯ç®¡ç†çš„å°å—æ¥èå…¥ä»–ä»¬çš„ç»éªŒæ•™è®­ã€‚è¿™ç§ç±»å‹çš„å˜æ›´è¦æ±‚ä¸‹æ¸¸ç”¨æˆ·è¿›è¡Œæ›´æ”¹æ‰èƒ½å°†å…¶ä»£ç è¿ç§»åˆ°æ–°çš„ APIï¼Œå› æ­¤åœ¨æ²¡æœ‰è®¤çœŸè€ƒè™‘æ”¶ç›Šæˆæœ¬æ¯”é‡çš„æƒ…å†µä¸‹ï¼Œä¸åº”è¿›è¡Œè¿™ç§å˜æ›´ã€‚\nå¯¹äºè¿˜åœ¨æ—©æœŸå¼€å‘é˜¶æ®µçš„é¡¹ç›®ï¼ˆä¸»ç‰ˆæœ¬å·æ˜¯ v0ï¼‰ï¼Œç”¨æˆ·ä¼šæœŸæœ›å¶å°”çš„é‡å¤§å˜æ›´ã€‚å¯¹äºå£°ç§°å·²ç»ç¨³å®šçš„é¡¹ç›®ï¼ˆä¸»ç‰ˆæœ¬æ˜¯ v1 æˆ–è€…æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼Œå¿…é¡»åœ¨æ–°çš„ä¸»ç‰ˆæœ¬è¿›è¡Œé‡å¤§å˜æ›´ã€‚è¿™ç¯‡æ–‡ç« æ¢è®¨äº†ä¸»ç‰ˆæœ¬è¯­ä¹‰ã€å¦‚ä½•åˆ›å»ºå¹¶å‘å¸ƒæ–°çš„ä¸»ç‰ˆæœ¬ä»¥åŠå¦‚ä½•ç»´æŠ¤ä¸€ä¸ª Go Modules çš„å¤šä¸ªä¸»ç‰ˆæœ¬ã€‚\nä¸»ç‰ˆæœ¬å’Œæ¨¡å—è·¯å¾„ æ¨¡å—åœ¨ Go ä¸­ç¡®å®šäº†ä¸€ä¸ªé‡è¦çš„åŸåˆ™ï¼Œå³ â€œå¯¼å…¥å…¼å®¹æ€§è§„åˆ™â€\n å¦‚æœæ—§åŒ…å’Œæ–°åŒ…çš„å¯¼å…¥è·¯å¾„ç›¸åŒï¼Œæ–°åŒ…å¿…é¡»å‘åå…¼å®¹æ—§çš„åŒ…\n æ ¹æ®è¿™æ¡åŸåˆ™ï¼Œä¸€ä¸ªè½¯ä»¶åŒ…æ–°çš„ä¸»ç‰ˆæœ¬æ²¡æœ‰å‘åå…¼å®¹ä»¥å‰çš„ç‰ˆæœ¬ã€‚è¿™æ„å‘³ç€è¿™ä¸ªè½¯ä»¶åŒ…æ–°çš„ä¸»ç‰ˆæœ¬å¿…é¡»ä½¿ç”¨å’Œä¹‹å‰ç‰ˆæœ¬ä¸åŒçš„æ¨¡å—è·¯å¾„ã€‚ä» v2Â å¼€å§‹ï¼Œä¸»ç‰ˆæœ¬å·å¿…é¡»å‡ºç°åœ¨æ¨¡å—è·¯å¾„çš„ç»“å°¾ï¼ˆåœ¨ go.mod æ–‡ä»¶çš„ moduleÂ è¯­å¥ä¸­å£°æ˜ï¼‰ã€‚ä¾‹å¦‚ï¼Œå½“æ¨¡å— github.com/googleapis/gax-goÂ çš„å¼€å‘è€…ä»¬å¼€å‘å®ŒÂ v2Â ï¼Œä»–ä»¬ç”¨äº†æ–°çš„æ¨¡å—è·¯å¾„ github.com/googleapis/gax-go/v2Â ã€‚æƒ³è¦ä½¿ç”¨ v2Â çš„ç”¨æˆ·å¿…é¡»æŠŠä»–ä»¬çš„åŒ…å¯¼å…¥å’Œæ¨¡å—è¦æ±‚æ›´æ”¹ä¸º github.com/googleapis/gax-go/v2Â éœ€è¦ä¸»ç‰ˆæœ¬å·åç¼€æ˜¯ Go æ¨¡å—å’Œå¤§å¤šæ•°å…¶ä»–ä¾èµ–ç®¡ç†ç³»ç»Ÿä¸åŒçš„æ–¹å¼ä¹‹ä¸€ã€‚åç¼€ç”¨äºè§£å†³è±å½¢ä¾èµ–é—®é¢˜ã€‚åœ¨ Go æ¨¡å—ä¹‹å‰ï¼Œgopkg.inÂ å…è®¸è½¯ä»¶åŒ…ç»´æŠ¤è€…éµå¾ªæˆ‘ä»¬ç°åœ¨ç§°ä¸ºå¯¼å…¥å…¼å®¹æ€§è§„åˆ™çš„å†…å®¹ã€‚ä½¿ç”¨ gopkg.in æ—¶ï¼Œå¦‚æœä½ ä¾èµ–ä¸€ä¸ªå¯¼å…¥äº† gopkg.in/yaml.v1Â çš„åŒ…ä»¥åŠå¦ä¸€ä¸ªå¯¼å…¥äº† gopkg.in/yaml.v2Â çš„åŒ…ï¼Œè¿™ä¸ä¼šå‘ç”Ÿå†²çªï¼Œå› ä¸ºä¸¤ä¸ª yamlÂ åŒ…æœ‰ç€ä¸åŒçš„å¯¼å…¥è·¯å¾„ï¼ˆå®ƒä»¬ä½¿ç”¨å’Œ Go Modules ç±»ä¼¼çš„ç‰ˆæœ¬åç¼€ï¼‰ã€‚ç”±äº gopkg.in å’Œ Go Modules å…±äº«ç›¸åŒçš„ç‰ˆæœ¬å·åç¼€æ–¹æ³•ï¼Œå› æ­¤ Go å‘½ä»¤æ¥å— gopkg.in/yaml.v2Â ä¸­çš„ .v2Â ä½œä¸ºæœ‰æ•ˆçš„ç‰ˆæœ¬å·ã€‚è¿™æ˜¯ä¸€ä¸ªä¸ºäº†å’Œ gopkg.in å…¼å®¹çš„ç‰¹æ®Šæƒ…å†µï¼Œåœ¨å…¶ä»–åŸŸæ‰˜ç®¡çš„æ¨¡å—éœ€è¦ä½¿ç”¨åƒ /v2Â è¿™æ ·çš„æ–œæ åç¼€ã€‚\nä¸»ç‰ˆæœ¬ç­–ç•¥ æ¨èçš„ç­–ç•¥æ˜¯åœ¨ä»¥ä¸»ç‰ˆæœ¬åç¼€å‘½åçš„ç›®å½•ä¸­å¼€å‘ v2+Â æ¨¡å—ã€‚\ngithub.com/googleapis/gax-go @ master branch /go.mod â†’ module github.com/googleapis/gax-go /v2/go.mod â†’ module github.com/googleapis/gax-go/v2 è¿™ç§æ–¹å¼ä¸ä¸æ”¯æŒ Go Modules çš„ä¸€äº›å·¥å…·å…¼å®¹ï¼šä»“åº“ä¸­çš„æ–‡ä»¶è·¯å¾„ä¸ GOPATH æ¨¡å¼ä¸‹ go getÂ å‘½ä»¤é¢„æœŸçš„è·¯å¾„åŒ¹é…ã€‚è¿™ä¸€ç­–ç•¥ä¹Ÿå…è®¸æ‰€æœ‰çš„ä¸»ç‰ˆæœ¬ä¸€èµ·åœ¨ä¸åŒçš„ç›®å½•ä¸­å¼€å‘ã€‚\nå…¶ä»–çš„ç­–ç•¥å¯èƒ½æ˜¯å°†ä¸»ç‰ˆæœ¬æ”¾ç½®åœ¨å•ç‹¬çš„åˆ†æ”¯ä¸Šã€‚ç„¶è€Œï¼Œå¦‚æœ v2+Â çš„æºä»£ç åœ¨ä»“åº“çš„é»˜è®¤åˆ†æ”¯ä¸Šï¼ˆä¸€èˆ¬æ˜¯ masterï¼‰ï¼Œä¸æ”¯æŒç‰ˆæœ¬çš„å·¥å…·ï¼ˆåŒ…æ‹¬ GOPATH æ¨¡å¼ä¸‹çš„ Go å‘½ä»¤ï¼‰å¯èƒ½æ— æ³•åŒºåˆ†ä¸åŒçš„ä¸»ç‰ˆæœ¬ã€‚\næœ¬æ–‡ä¸­çš„ç¤ºä¾‹éµå¾ªä¸»ç‰ˆæœ¬å­ç›®å½•ç­–ç•¥ï¼Œæ‰€ä»¥æä¾›äº†æœ€å¤§çš„å…¼å®¹æ€§ã€‚æˆ‘ä»¬å»ºè®®æ¨¡å—çš„ä½œè€…éµå¾ªè¿™ç§ç­–ç•¥ï¼Œåªè¦ä»–ä»¬è¿˜æœ‰ç”¨æˆ·åœ¨ä½¿ç”¨ GOPATHÂ æ¨¡å¼å¼€å‘ã€‚\nå‘å¸ƒ v2 åŠæ›´é«˜ç‰ˆæœ¬ è¿™ç¯‡æ–‡ç« ä»¥ github.com/googleapis/gax-goÂ ä¸ºä¾‹ï¼š\n$ pwd /tmp/gax-go $ ls CODE_OF_CONDUCT.md call_option.go internal CONTRIBUTING.md gax.go invoke.go LICENSE go.mod tools.go README.md go.sum RELEASING.md header.go $ cat go.mod module github.com/googleapis/gax-go go 1.9 require ( github.com/golang/protobuf v1.3.1 golang.org/x/exp v0.0.0-20190221220918-438050ddec5e golang.org/x/lint v0.0.0-20181026193005-c67002cb31c3 golang.org/x/tools v0.0.0-20190114222345-bf090417da8b google.golang.org/grpc v1.19.0 honnef.co/go/tools v0.0.0-20190102054323-c2f93a96b099 ) $ è¦å¼€å§‹å¼€å‘ github.com/googleapis/gax-goÂ çš„ v2Â ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ v2/Â ç›®å½•å¹¶å°†åŒ…çš„å†…å®¹å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸­ã€‚\n$ mkdir v2 $ cp *.go v2/ building file list ... done call_option.go gax.go header.go invoke.go tools.go sent 10588 bytes received 130 bytes 21436.00 bytes/sec total size is 10208 speedup is 0.95 $ ç°åœ¨ï¼Œæˆ‘ä»¬é€šè¿‡å¤åˆ¶å½“å‰çš„ go.modÂ æ–‡ä»¶å¹¶ä¸”åœ¨ module è·¯å¾„ä¸Šæ·»åŠ  /v2Â åç¼€æ¥åˆ›å»ºå±äº v2 çš„ go.modÂ æ–‡ä»¶ã€‚\n$ cp go.mod v2/go.mod $ go mod edit -module github.com/googleapis/gax-go/v2 v2/go.mod $ æ³¨æ„ï¼š v2Â ç‰ˆæœ¬è¢«è§†ä¸ºä¸ v0 / v1Â ç‰ˆæœ¬åˆ†å¼€çš„æ¨¡å—ï¼Œä¸¤è€…å¯ä»¥å…±å­˜äºåŒä¸€æ„å»ºä¸­ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„ v2+Â æ¨¡å—å…·æœ‰å¤šä¸ªè½¯ä»¶åŒ…ï¼Œä½ åº”è¯¥æ›´æ–°å®ƒä»¬ä½¿ç”¨æ–°çš„ /v2Â å¯¼å…¥è·¯å¾„ï¼Œå¦åˆ™ï¼Œä½ çš„ v2+Â æ¨¡å—ä¼šä¾èµ–ä½ çš„ v0 / v1Â æ¨¡å—ã€‚è¦å‡çº§æ‰€æœ‰ github.com/my/projectÂ ä¸º github.com/my/project/v2Â ï¼Œå¯ä»¥ä½¿ç”¨ findÂ å’Œ sedÂ å‘½ä»¤ï¼š\n$ find . -type f \\  -name \u0026#39;*.go\u0026#39; \\  -exec sed -i -e \u0026#39;s,github.com/my/project,github.com/my/project/v2,g\u0026#39; {} \\; $ ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ª v2Â æ¨¡å—ï¼Œä½†æ˜¯æˆ‘ä»¬è¦åœ¨ç‰ˆæœ¬å‘å¸ƒä¹‹å‰è¿›è¡Œå®éªŒå¹¶è¿›è¡Œä¿®æ”¹ã€‚åœ¨æˆ‘ä»¬å‘å¸ƒ v2.0.0Â ï¼ˆæˆ–è€…å…¶ä»–æ²¡æœ‰é¢„å‘å¸ƒåç¼€çš„ç‰ˆæœ¬ï¼‰ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¼€å‘å¹¶ä¸”å¯ä»¥åšå‡ºé‡å¤§å˜æ›´ï¼Œå°±å¦‚åŒæˆ‘ä»¬å†³å®šå®ç°æ–° API ä¸€æ ·ã€‚ å¦‚æœæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿåœ¨æ­£å¼å‘å¸ƒæ–° API ä¹‹å‰å¯¹å…¶è¿›è¡Œè¯•éªŒï¼Œå¯ä»¥é€‰æ‹©å‘å¸ƒ v2Â é¢„å‘å¸ƒç‰ˆæœ¬ï¼š\n$ git tag v2.0.0-alpha.1 $ git push origin v2.0.0-alpha.1 $ ä¸€æ—¦æˆ‘ä»¬å¯¹ v2Â API æ„Ÿåˆ°æ»¡æ„å¹¶ä¸”ç¡®å®šä¸ä¼šå†æœ‰åˆ«çš„é‡å¤§å˜æ›´ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“ä¸Š Git æ ‡è®° v2.0.0Â ã€‚\n$ git tag v2.0.0 $ git push origin v2.0.0 $ åˆ°é‚£æ—¶ï¼Œå°±æœ‰ä¸¤ä¸ªä¸»ç‰ˆæœ¬éœ€è¦ç»´æŠ¤ã€‚å‘åå…¼å®¹çš„æ›´æ”¹å’Œé”™è¯¯ä¿®å¤ä½¿ç”¨æ–°çš„æ¬¡ç‰ˆæœ¬æˆ–è€…è¡¥ä¸ç‰ˆæœ¬å‘å¸ƒï¼ˆæ¯”å¦‚ v1.1.0Â ï¼Œ v2.0.1Â ç­‰ï¼‰ã€‚\næ€»ç»“ ä¸»ç‰ˆæœ¬å˜æ›´ä¼šå¸¦æ¥å¼€å‘å’Œç»´æŠ¤çš„å¼€é”€ï¼Œå¹¶ä¸”éœ€è¦ä¸‹æ¸¸ç”¨æˆ·çš„é¢å¤–ä»˜å‡ºæ‰èƒ½è¿ç§»ã€‚è¶Šå¤§çš„é¡¹ç›®ä¸­è¿™ç§ä¸»ç‰ˆæœ¬å˜æ›´çš„å¼€é”€å°±è¶Šå¤§ã€‚åªæœ‰åœ¨ç¡®å®šäº†ä»¤äººä¿¡æœçš„ç†ç”±ä¹‹åï¼Œæ‰åº”è¯¥è¿›è¡Œä¸»ç‰ˆæœ¬å˜æ›´ã€‚ä¸€æ—¦ç¡®å®šäº†ä»¤äººä¿¡æœçš„é‡å¤§å˜æ›´åŸå› ï¼Œæˆ‘ä»¬å»ºè®®åœ¨ master åˆ†æ”¯è¿›è¡Œå¤šä¸ªä¸»ç‰ˆæœ¬çš„å¼€å‘ï¼Œå› ä¸ºè¿™æ ·èƒ½ä¸å„ç§ç°æœ‰å·¥å…·å…¼å®¹ã€‚\nå¯¹ v1+Â æ¨¡å—çš„é‡å¤§å˜æ›´åº”è¯¥å§‹ç»ˆå‘ç”Ÿåœ¨æ–°çš„ vN+1Â æ¨¡å—ä¸­ã€‚ä¸€ä¸ªæ–°æ¨¡å—å‘å¸ƒæ—¶ï¼Œå¯¹äºç»´æŠ¤è€…å’Œéœ€è¦è¿ç§»åˆ°è¿™ä¸ªæ–°è½¯ä»¶åŒ…çš„ç”¨æˆ·æ¥è¯´æ„å‘³ç€æ›´å¤šçš„å·¥ä½œã€‚å› æ­¤ï¼Œç»´æŠ¤äººå‘˜åº”è¯¥åœ¨å‘å¸ƒç¨³å®šç‰ˆæœ¬ä¹‹å‰å¯¹å…¶ API è¿›è¡ŒéªŒè¯ï¼Œå¹¶ä»”ç»†è€ƒè™‘åœ¨ v1Â ç‰ˆæœ¬ä¹‹åæ˜¯å¦ç¡®æœ‰å¿…è¦è¿›è¡Œé‡å¤§å˜æ›´ã€‚\nç›¸å…³æ–‡ç«   å‘å¸ƒ Go Modules å¯ç”¨æ¨¡å—é•œåƒå’Œæ ¡éªŒæ•°æ®åº“ è¿ç§»åˆ° Go Modules ä½¿ç”¨ Go Modules 2019 å¹´çš„ Go Modules Go ä¸­è½¯ä»¶åŒ…ç‰ˆæœ¬æ§åˆ¶çš„å»ºè®® å°é¢æ•…äº‹ App Engine SDK å’Œå·¥ä½œåŒº ç»„ç»‡ Go ä»£ç  ","id":0,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡æ˜¯ä¸€ç¯‡ç¿»è¯‘æ–‡ç« : \u003ca href=\"https://blog.golang.org/v2-go-modules\"\u003ehttps://blog.golang.org/v2-go-modules\u003c/a\u003e \nåŸæ–‡ä½œè€…ï¼š\u003ca href=\"https://blog.golang.org/\"\u003eJean de Klerk å’Œ Tyler Bui-Palsu\u003c/a\u003e  è¯‘è€…ï¼š\u003ca href=\"https://github.com/befovy\"\u003ebefovy\u003c/a\u003e   æ ¡å¯¹ï¼š\u003ca href=\"https://github.com/polaris1119\"\u003epolaris1119\u003c/a\u003e \nè¯‘æ–‡ç”± \u003ca href=\"https://github.com/studygolang/GCTT\"\u003eGCTT\u003c/a\u003e åŸåˆ›ç¼–è¯‘ï¼Œ\u003ca href=\"https://studygolang.com/articles/25130\"\u003eGoè¯­è¨€ä¸­æ–‡ç½‘\u003c/a\u003e è£èª‰æ¨å‡º\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"heading\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eæœ¬æ–‡æ˜¯ Go modules ç³»ç»Ÿçš„ç¬¬å››éƒ¨åˆ†\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePart 1: \u003ca href=\"https://blog.golang.org/using-go-modules\"\u003eä½¿ç”¨ Go Modules\u003c/a\u003e Â \u003ca href=\"https://studygolang.com/articles/19334\"\u003eè¯‘æ–‡\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePart 2: \u003ca href=\"https://blog.golang.org/migrating-to-go-modules\"\u003eè¿ç§»åˆ° Go Modules\u003c/a\u003e Â \u003ca href=\"https://studygolang.com/articles/23133\"\u003eè¯‘æ–‡\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePart 3: \u003ca href=\"https://blog.golang.org/publishing-go-modules\"\u003eå‘å¸ƒ Go Modules\u003c/a\u003e \u003ca href=\"https://studygolang.com/articles/25129\"\u003eè¯‘æ–‡\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePart 4: \u003ca href=\"https://blog.golang.org/v2-go-modules\"\u003eGo Modules : v2 åŠæ›´é«˜ç‰ˆæœ¬\u003c/a\u003eÂ (æœ¬æ–‡)Â \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eéšç€æˆåŠŸçš„é¡¹ç›®é€æ¸æˆç†Ÿä»¥åŠæ–°éœ€æ±‚çš„åŠ å…¥ï¼Œæ—©æœŸçš„åŠŸèƒ½å’Œè®¾è®¡å†³ç­–å¯èƒ½ä¸å†é€‚ç”¨ã€‚ å¼€å‘è€…ä»¬å¯èƒ½å¸Œæœ›é€šè¿‡åˆ é™¤åºŸå¼ƒä½¿ç”¨çš„åŠŸèƒ½ã€é‡å‘½åç±»å‹æˆ–å°†å¤æ‚çš„ç¨‹åºæ‹†åˆ†ä¸ºå¯ç®¡ç†çš„å°å—æ¥èå…¥ä»–ä»¬çš„ç»éªŒæ•™è®­ã€‚è¿™ç§ç±»å‹çš„å˜æ›´è¦æ±‚ä¸‹æ¸¸ç”¨æˆ·è¿›è¡Œæ›´æ”¹æ‰èƒ½å°†å…¶ä»£ç è¿ç§»åˆ°æ–°çš„ APIï¼Œå› æ­¤åœ¨æ²¡æœ‰è®¤çœŸè€ƒè™‘æ”¶ç›Šæˆæœ¬æ¯”é‡çš„æƒ…å†µä¸‹ï¼Œä¸åº”è¿›è¡Œè¿™ç§å˜æ›´ã€‚\u003c/p\u003e","tags":["golang"],"title":"Go Modules : v2 åŠæ›´é«˜ç‰ˆæœ¬","uri":"https://blog.befovy.com/2019/12/v2-go-modules/","year":"2019"},{"content":"ä¹‹å‰åœ¨ github pages ä¸Šéƒ¨ç½²çš„åšå®¢å›¾ç‰‡è®¿é—®ä¸€ç›´å¾ˆæ…¢ï¼Œä¸»è¦æ˜¯æ²¡é’±ä¹°å›¾åºŠã€‚ ä»Šå¤©åˆèŠ±åŠŸå¤«ç”¨ gitee å’Œå…¶ä»–çš„å·¥å…·ç»™è‡ªå·±åšäº†ä¸€ä¸ªå›¾åºŠã€‚\ngitee åšå›¾åºŠçš„ä¼˜ç‚¹ï¼š\n è®¿é—®é€Ÿåº¦å¿«  ç»“åˆæœ¬æ–‡æä¾›çš„ä¸€å¥—å·¥å…·ç»„åˆå¯ä»¥å®ç°ï¼š\n å›¾ç‰‡é€‰ä¸­ä¸€é”®ä¸Šä¼  å‰ªè´´æ¿å›¾ç‰‡ä¸€é”®ä¸Šä¼  ä¸Šä¼ å®Œæˆåå¤åˆ¶å›¾ç‰‡ç½‘å€åˆ°å‰ªè´´æ¿ å›¾ç‰‡ä¸Šä¼ è‡ªåŠ¨å‹ç¼© ä¾ç„¶å®Œå…¨å…è´¹  æ–‡ä¸­ç”¨åˆ°çš„å·¥å…·  ç äº‘ gitee ï¼Œä½¿ç”¨ç äº‘ä¸­çš„å…¬å¼€ä»“åº“ä½œä¸ºå›¾åºŠï¼Œå¯ä»¥å¤–é“¾è®¿é—® githubï¼Œå›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åˆ° github å…¬å¼€ä»“åº“ github actions è‡ªåŠ¨æŠŠ github ä»“åº“ä¸­çš„å›¾ç‰‡åŒæ­¥åˆ° gitee ä»“åº“ github app ImgBot è‡ªåŠ¨å‹ç¼©å›¾ç‰‡ github actions è‡ªåŠ¨åˆå¹¶ ImgBot å‘èµ·çš„å›¾ç‰‡å‹ç¼©åçš„ pull request PicGo å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼   æ­å»ºæ­¥éª¤ æ­å»ºæ­¥éª¤ä¸­æ˜¯æœ‰ä¸€äº›é—®é¢˜è´¹äº†äº›æ—¶é—´ï¼Œä½†æ˜¯æœ‰äº†æˆ‘å¸®ä½ è¸©äº†æ‰€æœ‰çš„å‘å¹¶ä¸”æ€»ç»“è¿™ç¯‡æ•™ç¨‹åï¼Œçœ‹åˆ°è¿™é‡Œçš„ä½ ä¸€å®šèƒ½å¤Ÿé¡ºåˆ©æ­å»ºè‡ªå·±çš„å…è´¹å¥½ç”¨çš„å›¾åºŠã€‚\næœ¬æ–‡æ•™ç¨‹ä½¿ç”¨äº† github actionï¼Œå¦‚æœä½ çš„ github è¿˜æœ‰æ²¡æ¿€æ´» actions çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶ä»–çš„ ci å·¥å…·å®ç°ã€‚ github ä»“åº“ä¸­å¦‚æœçœ‹ä¸åˆ°ä¸‹é¢è¿™ä¸ª actions å›¾æ ‡ï¼Œå°±è¯´æ˜è¿˜ä¸æ”¯æŒ actions åŠŸèƒ½ã€‚ github ä»“åº“å’Œè®¾ç½® é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª github ä»“åº“ï¼Œæ¯”å¦‚ https://github.com/befovy/images ï¼Œåˆ›å»ºæ­¥éª¤ç•¥è¿‡ã€‚\nä¸º github ä»“åº“å®‰è£… ImgBot æœºå™¨äººã€‚ æ‰“å¼€ ImgBot ç½‘ç«™ï¼Œç‚¹å‡» ã€try for freeã€‘ï¼Œ ImgBot å£°ç§°å¼€æºé¡¹ç›®èƒ½å¤Ÿä¸€ç›´å…è´¹ä½¿ç”¨å…¶æœåŠ¡ã€‚ ä» ImgBot ç½‘ç«™è·³è½¬åˆ° github ç½‘ç«™åï¼Œç‚¹å‡» ã€Set up a planã€‘ æŒ‰é’®ï¼Œåœ¨ä¸‹ä¸€æ­¥ä¸­é€‰æ‹© ã€Open Sourceã€‘ è¿™ä¸€ä¸ªå…è´¹è®¡åˆ’ã€‚ä¸‹ä¸€æ­¥æ˜¯ã€Install it for freeã€‘ã€‚ æœ€ååˆ°è¿™ä¸‹å›¾è¿™ä¸ªæ­¥éª¤ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸ºæ‰€æœ‰ä»“åº“å¼€å¯æ­¤åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åªé€‰æ‹©ä¸ºåˆšåˆšåˆ›å»ºçš„å›¾åºŠä»“åº“æ‰“å¼€ ImgBotã€‚\nä½¿ç”¨ github actions è‡ªåŠ¨åŒæ­¥åˆ° gitee åœ¨ gitee ä¹Ÿä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ç”¨æ¥ä¿å­˜å›¾åºŠå›¾ç‰‡ã€‚ç„¶åä¸º gitee æ–°å»ºä¸€ä¸ª ssh keyã€‚å¹¶æŠŠå…¬é’¥å¢åŠ åœ¨ gitee è´¦æˆ·çš„è®¾ç½®ä¸­ã€‚\nåœ¨ä¹‹å‰åˆ›å»ºçš„ github å›¾åºŠä»“åº“ä¸­ç¼–è¾‘ actions é…ç½®æ–‡ä»¶ï¼Œæ–°å¢ä¸€ä¸ª .github/workflows/gitee.yml\nname: Push to gitee on: push: branches: - master jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v1 - name: Set SSH Key env: SSH_KEY: ${{ secrets.GITEE_SSH_KEY }} SSH_KEY_PUB: ${{ secrets.GITEE_SSH_PUB }} run: | mkdir -p ~/.ssh ssh-keyscan -H gitee.com \u0026gt;\u0026gt; ~/.ssh/known_hosts echo ${SSH_KEY} \u0026gt; ~/.ssh/id_rsa sed -i -e \u0026#34;s#\\\\\\\\n#\\n#g\u0026#34; ~/.ssh/id_rsa chmod 600 ~/.ssh/id_rsa echo ${SSH_KEY_PUB} \u0026gt; ~/.ssh/id_rsa.pub chmod 600 ~/.ssh/id_rsa.pub - name: Push to gitee run: | git switch -c master git remote add gitee git@gitee.com:befovy/images.git git push --set-upstream gitee master -f è¿™ä¸ª actions ä¸­ä¸»è¦æ˜¯ checkout å½“å‰ä»“åº“æ–‡ä»¶ï¼Œé…ç½® gitee çš„ ssh å¯†é’¥ï¼Œæ¨é€ git ä»“åº“åˆ° giteeã€‚\nå¯†é’¥ä¸èƒ½æ˜æ–‡å†™åœ¨ actions é…ç½®æ–‡ä»¶ï¼Œéœ€è¦ä¿å­˜åœ¨ä»“åº“çš„è®¾ç½®ä¸­ã€‚ åœ¨ github ä»“åº“ è®¾ç½®é€‰é¡¹ä¸­ï¼Œé€‰æ‹©å·¦ä¾§çš„ Secretsã€‚æŠŠå‰é¢ç”Ÿæˆçš„ ssh å…¬é’¥å’Œç§é’¥éƒ½ä¿å­˜èµ·æ¥ã€‚æ³¨æ„ç§é’¥æœ¬èº«ç”±å¥½å¤šè¡Œç»„æˆï¼Œä½†æ˜¯ actions secrets è¿™é‡Œå¥½åƒæ¢è¡Œç¬¦ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæŠŠç§é’¥ä¸­æ‰€æœ‰çš„æ¢è¡Œç”¨ \\n æ›¿æ¢æ‰ï¼Œæ›¿æ¢å®Œåç§é’¥åªå‰©ä¸‹ä¸€è¡Œæ–‡æœ¬ã€‚ ä¿å­˜åœ¨è¿™ä¸ªé¡µé¢çš„ secrets å¯ä»¥åœ¨ actions é…ç½®ä¸­ä½¿ç”¨ã€‚ æˆ‘ä¿å­˜çš„åç§°åˆ†åˆ«æ˜¯ GITEE_SSH_KEY å’Œ GITEE_SSH_PUB ï¼Œåœ¨ actions é…ç½®æ–‡ä»¶ä¸­çš„ä½¿ç”¨æ–¹å¼æ˜¯ ${{ secrets.GITEE_SSH_KEY }} ã€‚\nåœ¨ gitee.yml ä¸­ï¼Œæˆ‘ä» secrets ä¸­å–å‡ºç§é’¥ï¼Œä¿å­˜åœ¨ .ssh/id_rsa ä¸­åˆé€šè¿‡å‘½ä»¤æŠŠå…¶ä¸­çš„ \\n å…¨éƒ¨æ¢æˆäº†çœŸæ­£çš„æ¢è¡Œç¬¦ã€‚ è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„ä¸€ä¸ªå¤§å‘ï¼Œä¸è¿™ä¹ˆåšåé¢ git push ä¼šå‡ºé”™ã€‚\né…ç½®å¥½ ssh åï¼Œå¯ä»¥é€šè¿‡ git å‘½ä»¤æŠŠä»“åº“å†…å®¹ push åˆ° gitee ä¸­å»ã€‚ æ³¨æ„ï¼Œgithub actions ä¸­çš„ checkout æ£€å‡ºå½“å‰å†…å®¹åï¼Œgit æ˜¯åœ¨ä¸€ä¸ªæ¸¸ç¦»çŠ¶æ€ï¼Œæ²¡æœ‰åˆ†æ”¯åã€‚éœ€è¦å…ˆ git switch -c master è®¾ç½®å½“å‰ä¸º master åˆ†æ”¯ã€‚\nPicGo é…ç½® PicGo æ˜¯ç”¨ Electron-Vue å¼€å‘çš„ä¸€ä¸ªå›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ è‡³å›¾åºŠçš„å·¥å…·ã€‚å…ˆä¸‹è½½å®‰è£… PicGo åˆ°ç”µè„‘ä¸­ã€‚ PicGo æ”¯æŒ githubã€æ–°æµªã€ä¸ƒç‰›ç­‰å¤šç§å›¾åºŠã€‚ä¹Ÿå¯ä»¥å®‰è£…æ’ä»¶æ”¯æŒ gitee å›¾åºŠï¼Œä½†æ˜¯ gitee ä¸Šä¸èƒ½é…ç½®å›¾ç‰‡è‡ªåŠ¨å‹ç¼©ï¼Œæ‰€ä»¥æˆ‘åœ¨ github ç»•äº†ä¸€åœˆï¼Œå›¾ç‰‡åœ¨ github å‹ç¼©åå†åŒæ­¥åˆ° giteeã€‚\nPicGo è®¾ç½®å¦‚å›¾ï¼Œ æˆ‘ç”¨äº† githubPlus æ’ä»¶ï¼Œå…¶å®ç”¨é»˜è®¤çš„ github å›¾åºŠåŠŸèƒ½å°±è¡Œã€‚\nå›¾ä¸­ç”¨åˆ°çš„ token åœ¨ https://github.com/settings/tokens é¡µé¢ç”Ÿæˆã€‚\nè‡ªå·±ä¿®æ”¹ä¸€ä¸‹ PicGo çš„ä¸Šä¼ å›¾ç‰‡å¿«æ·é”®ï¼Œé€‰æ‹©ä¸€å¼ å›¾ç‰‡ä¸Šä¼ ã€‚ä¸Šä¼ å®Œæˆå url ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ã€‚ ç­‰ github actions æ‰§è¡Œå®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡å‰ªè´´æ¿ä¸­çš„ url è®¿é—®åˆ°ä¿å­˜åœ¨ gitee çš„å›¾ç‰‡äº†ï¼Œ gitee çš„å›¾ç‰‡è®¿é—®ç¡®å®å¾ˆå¿«ã€‚\ngithub actions è‡ªåŠ¨åˆå¹¶ ImgBot çš„ pr ä¸Šä¼ å›¾ç‰‡åï¼Œå¾ˆå¿« ImgBot å°±ä¼šå¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œå¹¶åœ¨ github çš„ä»“åº“ä¸­å‘èµ·ä¸€ä¸ª pull requestã€‚æ‰‹åŠ¨ç‚¹å‡»åˆå¹¶æŒ‰é’®å¯¹æˆ‘æ¥è¯´å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œèƒ½ä¸èƒ½è‡ªåŠ¨æå‘¢ã€‚æœ‰äº† actions æ²¡å•¥ä¸èƒ½çš„ï¼Œ\nåœ¨ github actions é…ç½®æ–°å¢ä¸€ä¸ªæ–‡ä»¶ï¼Œ.github/workflow/merge.yml\nname: Merge Imgbot on: pull_request: types: - opened - ready_for_review pull_request_review: types: - submitted status: {} jobs: automerge: runs-on: ubuntu-latest steps: - name: automerge uses: \u0026#34;pascalgn/automerge-action@v0.6.1\u0026#34; env: GITHUB_TOKEN: \u0026#34;${{ secrets.GIT_MERGE_TOKEN }}\u0026#34; MERGE_LABELS: \u0026#34;\u0026#34; MERGE_METHOD: \u0026#34;squash\u0026#34; MERGE_COMMIT_MESSAGE: \u0026#34;pull-request-description\u0026#34; MERGE_FORKS: \u0026#34;false\u0026#34; MERGE_RETRIES: \u0026#34;2\u0026#34; MERGE_RETRY_SLEEP: \u0026#34;10000\u0026#34; UPDATE_METHOD: \u0026#34;rebase\u0026#34; è¿™ä¸ª actions é…ç½®ä¸­ç”¨åˆ°äº† pascalgn/automerge-actionï¼Œç®€åŒ–äº†å¯¹äº pull request çš„æ“ä½œã€‚ æ³¨æ„è®¾ç½® MERGE_LABLES è¦ç•™ç©ºï¼Œå¦åˆ™ä½ å¿…é¡»ç»™ pull request æ‰“ä¸Šå¯¹åº”çš„ lable åï¼Œæ‰èƒ½è‡ªåŠ¨åˆå¹¶ã€‚ è¿™é‡Œå†ä¸€æ¬¡ç”¨åˆ°äº† secrets ä¿å­˜äº† github tokenï¼Œå’Œä¸Šä¸€æ­¥é…ç½® PicGo ç”¨åˆ°çš„ token ä¸€æ ·ã€‚\nç°åœ¨çš„æµç¨‹æ˜¯ï¼š\n ç”µè„‘ä¸­ PicGo å®¢æˆ·ç«¯è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ° github ä»“åº“ã€‚ master åˆ†æ”¯çš„ push æ“ä½œè§¦å‘ actions å°†ä»“åº“åŒæ­¥åˆ° giteeã€‚ ImgBot ç¨åä¼šå‘èµ· pull request åˆå¹¶ç»è¿‡å‹ç¼©çš„å›¾ç‰‡ pull request è§¦å‘ actions è‡ªåŠ¨è¿›è¡Œåˆ†æ”¯åˆå¹¶ï¼Œå¹¶ push åˆ°ç›®æ ‡åˆ†æ”¯(master) master åˆ†æ”¯ push æ“ä½œå†æ¬¡è§¦å‘ actions å°†ä»“åº“åŒæ­¥åˆ° giteeã€‚  æ‰‹åŠ¨è§¦å‘æ­¥éª¤1åï¼Œå…¶ä½™æ­¥éª¤å®Œå…¨è‡ªåŠ¨åŒ–è¿è¡Œã€‚è¿›ä¸€æ­¥æ­¥éª¤2è¿˜å¯ä»¥çœå»ä¸€äº›ç¯å¢ƒã€‚\n- name: Push to gitee run: | git switch -c master git remote add gitee git@gitee.com:befovy/images.git imgbot=`git rev-parse HEAD | git show -s --format=\u0026#39;%ae\u0026#39; | grep imgbot` || echo \u0026#34;no imgbot\u0026#34; [[ ! -z \u0026#34;$imgbot\u0026#34; ]] \u0026amp;\u0026amp; git push --set-upstream gitee master -f || echo \u0026#34;Ingore push\u0026#34; åˆ¤æ–­æäº¤ä½œè€…æ˜¯å¦æ˜¯ imgbotï¼Œå¦‚æœä¸æ˜¯ï¼Œä¸è¿›è¡Œ push åˆ° gitee çš„æ“ä½œã€‚\n å®Œç»“\n","id":1,"section":"posts","summary":"\u003cp\u003eä¹‹å‰åœ¨ github pages ä¸Šéƒ¨ç½²çš„åšå®¢å›¾ç‰‡è®¿é—®ä¸€ç›´å¾ˆæ…¢ï¼Œä¸»è¦æ˜¯æ²¡é’±ä¹°å›¾åºŠã€‚\nä»Šå¤©åˆèŠ±åŠŸå¤«ç”¨ gitee å’Œå…¶ä»–çš„å·¥å…·ç»™è‡ªå·±åšäº†ä¸€ä¸ªå›¾åºŠã€‚\u003c/p\u003e\n\u003cp\u003egitee åšå›¾åºŠçš„ä¼˜ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè®¿é—®é€Ÿåº¦å¿«\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç»“åˆæœ¬æ–‡æä¾›çš„ä¸€å¥—å·¥å…·ç»„åˆå¯ä»¥å®ç°ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå›¾ç‰‡é€‰ä¸­ä¸€é”®ä¸Šä¼ \u003c/li\u003e\n\u003cli\u003eå‰ªè´´æ¿å›¾ç‰‡ä¸€é”®ä¸Šä¼ \u003c/li\u003e\n\u003cli\u003eä¸Šä¼ å®Œæˆåå¤åˆ¶å›¾ç‰‡ç½‘å€åˆ°å‰ªè´´æ¿\u003c/li\u003e\n\u003cli\u003eå›¾ç‰‡ä¸Šä¼ è‡ªåŠ¨å‹ç¼©\u003c/li\u003e\n\u003cli\u003eä¾ç„¶å®Œå…¨å…è´¹\u003c/li\u003e\n\u003c/ul\u003e","tags":null,"title":"æˆ‘çš„ gitee å›¾åºŠï¼Œè‡ªåŠ¨ä¸Šä¼ ã€å‹ç¼©ã€è·å–å›¾ç‰‡ url","uri":"https://blog.befovy.com/2019/11/gitee-image-bed/","year":"2019"},{"content":" è®¤çœŸè¯»å®Œæœ¬æ–‡å°±èƒ½æŒæ¡ç¼–å†™ä¸€ä¸ª Flutter ç³»ç»ŸéŸ³é‡æ’ä»¶çš„æŠ€èƒ½ï¼Œæ”¯æŒè°ƒèŠ‚ç³»ç»ŸéŸ³é‡ä»¥åŠç›‘å¬ç³»ç»ŸéŸ³é‡å˜åŒ–ã€‚ å¦‚æœ‰ä¸å½“ä¹‹å¤„æ•¬è¯·æŒ‡æ­£ã€‚\n 0ã€èƒŒæ™¯ æˆ‘æœ€è¿‘åœ¨åšä¸€ä¸ª Flutter è§†é¢‘æ’­æ”¾å™¨æ’ä»¶ fijkplayerï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹æˆ‘çš„ githubã€‚åœ¨ 0.1.0 ç‰ˆæœ¬ä¹‹åè€ƒè™‘å¢åŠ è°ƒèŠ‚ç³»ç»ŸéŸ³é‡åŠŸèƒ½ã€‚google ä¸€ç•ªï¼Œæ‰¾åˆ°äº†ç›¸å…³çš„ Flutter æ’ä»¶ï¼ˆFlutter çš„ç”Ÿæ€çœŸçš„æ˜¯å»ºç«‹æŒºå¿«çš„ï¼‰ã€‚ä½†ä»”ç»†äº†è§£æ’ä»¶çš„åŠŸèƒ½ä¹‹åï¼Œæ„Ÿè§‰æœ‰äº›ä¸æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼ŒåŒæ—¶ç”±äºæˆ‘çš„ fijkplayer æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œæƒ³å°½é‡é¿å…ä¾èµ–é¢å¤–çš„æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘å¹²å˜›ä¸è‡ªå·±åŠ¨æ‰‹é€ ä¸€ä¸ªï¼Ÿè¿™å¯æ¯”æ’­æ”¾å™¨æ’ä»¶ç®€å•å¤šäº†ã€‚æœ¬æ–‡å†™ä½œæ—¶æ’­æ”¾å™¨æ’ä»¶ fijkplayer ä¸Šå·²ç»å®Œæˆäº†éŸ³é‡è°ƒèŠ‚å’Œç›‘æ§çš„åŠŸèƒ½ï¼Œä¸ºäº†æ–‡æ¡£å†…å®¹æ¸…æ™°ï¼ŒæŠŠç›¸å…³çš„ä»£ç åˆå•ç‹¬æŠ½å‡ºæ¥ä½œä¸ºä¸€ä¸ªå°é¡¹ç›® flutter_volumeÂ ã€‚\n1ã€ç¯å¢ƒä»‹ç» æ­å»º Flutter ç¯å¢ƒè¿™é‡Œä¸ä¸“é—¨è®²äº†ã€‚ç›´æ¥ä» Flutter æ’ä»¶çš„å¼€å‘ç¯å¢ƒå…¥æ‰‹ã€‚æœ¬æ–‡ä½¿ç”¨çš„ Flutter ç‰ˆæœ¬å’Œç¯å¢ƒæ˜¯Â [âœ“] Flutter is fully installed. (Channel stable, v1.9.1+hotfix.2, on Mac OS X 10.14.6 18G95, locale zh-Hans-CN)Â åˆ›å»ºæ’ä»¶ æ–°å»ºä¸€ä¸ªå«åš flutter_volume çš„ Flutter æ’ä»¶ï¼šflutter create --org com.befovy -t plugin -i objc flutter_volumeÂ ã€‚flutter createÂ å‘½ä»¤ä½¿ç”¨å‚æ•° -tÂ é€‰æ‹©æ¨¡ç‰ˆï¼Œå¯é€‰å€¼ä¸º appÂ packageÂ pluginï¼Œåˆ†åˆ«ç”¨äºåˆ›å»º Flutter åº”ç”¨ç¨‹åºï¼ŒFlutter åŒ…ï¼ˆçº¯ dart ä»£ç å®ç°çš„åŠŸèƒ½ï¼‰ï¼Œ Flutter æ’ä»¶ï¼ˆå’Œä¸»æœºç³»ç»Ÿäº¤äº’ï¼‰ã€‚\næˆ‘åœ¨å¼€å§‹å†™ fijkplayer çš„æ—¶å€™ï¼Œé»˜è®¤æ’ä»¶è¯­è¨€è¿˜æ˜¯ java å’Œ objcï¼Œç°åœ¨1.9 ç‰ˆæœ¬ï¼Œéƒ½å·²ç»é»˜è®¤ä½¿ç”¨ kotlin å’Œ swift äº†ã€‚Swift æˆ‘è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œkotlin äº†è§£ä¸€äº›ï¼Œå¹¶ä¸” Android studio çš„ java è½¬æ¢ kotlin å¾ˆå¼ºå¤§ï¼Œæˆ‘è¿™é‡Œæ–°çš„å°é¡¹ç›® flutter_volume å°±ä¹Ÿä½¿ç”¨ kotlin å’Œ objc äº†ã€‚å¦‚æœè¦ä¿®æ”¹åˆ›å»º Flutter æ’ä»¶ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•° -iÂ å’Œ -aÂ ã€‚ä¾‹å¦‚ flutter create -t plugin -a java -i swift flutter_volume\næ’ä»¶ç›®å½•ç»“æ„ å…ˆåœ¨ Android Studio ä¸­å®‰è£… Flutter æ’ä»¶å’Œ Dart æ’ä»¶ã€‚ ç„¶åä½¿ç”¨ Android Studio æ‰“å¼€åˆšæ‰åˆ›å»ºçš„ plugin é¡¹ç›®ç›®å½• flutter_volumeã€‚æ³¨æ„æ˜¯ä½¿ç”¨ Android Studio ä¸­çš„ â€œOpen an existing Android Studio project\u0026rdquo; èœå•ã€‚\nä½¿ç”¨ Android Studio æ‰“å¼€ Flutter é¡¹ç›®åï¼Œå…¶ç»“æ„å¦‚ä¸‹ã€‚Flutter plugin çš„åŠŸèƒ½å®ç°åŸºæœ¬ä¸Šå°±æ˜¯ dart ä»£ç å’Œ android æœ¬åœ° kotlin/java ä»¥åŠ iOS æœ¬åœ° swift/objc ä»£ç äº’ç›¸è°ƒç”¨ã€‚å®ç°è¿™äº›åŠŸèƒ½çš„ä»£ç å°±åœ¨ä¸‹å›¾ä¸­ libs ç›®å½•ä¸­çš„ dart æºæ–‡ä»¶ï¼Œandroid/src ç›®å½•ä¸­çš„ java/kotlin æºæ–‡ä»¶ï¼Œä»¥åŠ ios/Classes ç›®å½•ä¸­çš„ objc/swift æºæ–‡ä»¶ã€‚åœ¨è¿™ä¸ª Android Studio å·¥ç¨‹ä¸­éšä¾¿æ‰“å¼€ä¸€ä¸ª android ç›®å½•å†…çš„æ–‡ä»¶ï¼Œéƒ½ä¼šç¼–è¾‘å™¨å³ä¸Šè§’å‡ºç° â€œOpen for Editing in Android Studioâ€ çš„å¯ç‚¹å‡»é“¾æ¥ï¼Œæ‰“å¼€ ios æ–‡ä»¶å¤¹çš„ä»»æ„æ–‡ä»¶ï¼Œéƒ½ä¼šå‡ºç°ç±»ä¼¼ â€œOpen for Editing in XCodeâ€ çš„å¯ç‚¹å‡»é“¾æ¥ã€‚\nåœ¨æˆ‘ä½¿ç”¨çš„è¿™ä¸ªç‰ˆæœ¬ flutter ä¸­ï¼Œæ–°é¡¹ç›®ç›´æ¥ä½¿ç”¨ Xcode æ‰“å¼€ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è§£å†³åŠæ³•æ˜¯å…ˆåœ¨ example/ios æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ pod installÂ ã€‚ä¹‹åå†ç‚¹å‡»Â â€œOpen for Editing in XCodeâ€ æ‰“å¼€ Xcode é¡¹ç›®ï¼Œæˆ–è€…ä½¿ç”¨ Xcode æ‰“å¼€ example/ios/Runner.xcworkspace å·¥ç¨‹ã€‚åˆ’é‡ç‚¹å…ˆåœ¨å‘½ä»¤åÂ example/ios æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ pod installï¼Œç„¶åå†æ‰“å¼€ Xcode é¡¹ç›®ã€‚\næ‰“å¼€ xcode åçœ‹åˆ°ï¼Œæ’ä»¶çš„ objc/swift ä»£ç è¢« pod ä½¿ç”¨æ–‡ä»¶é“¾æ¥å¥—äº†å¾ˆé•¿çš„è·¯å¾„ï¼Œå†™iOSæ’ä»¶ä¸»è¦å°±æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹çš„ä»£ç ä¸­å®ç°åŠŸèƒ½ã€‚ï¼ˆæˆªå›¾è¿˜æ˜¯ swift çš„æ’ä»¶é¡¹ç›®ï¼Œåæ¥ä¸ºäº†è¿›åº¦æ”¹æˆäº† objcï¼Œæ¯•ç«Ÿå¯¹ swift ä¸å¤ªç†Ÿæ‚‰ï¼‰\nç‚¹å‡» Open for Editing in Android StudioÂ æ‰“å¼€æ–°çš„ Android Studio é¡¹ç›®ï¼Œç­‰ gradle è‡ªåŠ¨åŒæ­¥å®Œæˆã€‚Â è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Android App å·¥ç¨‹ï¼Œflutter_volume æ’ä»¶ä½œä¸ºä¸€ä¸ª Android å·¥ç¨‹çš„ modue å­˜åœ¨ã€‚æ’ä»¶çš„åŠŸèƒ½å®ç°ä¹Ÿä¸»è¦æ˜¯ä¿®æ”¹è¿™ä¸ª module ä¸­çš„ä»£ç ã€‚\nä¸Šé¢çš„ Xcode å·¥ç¨‹ä»¥åŠè¿™ä¸ª Android Studio å·¥ç¨‹ï¼Œéƒ½æ˜¯å¯ä»¥è¿è¡Œçš„ App å·¥ç¨‹ï¼Œè¿™ä¸ª Flutter å·¥å…·å·²ç»å¸®æˆ‘ä»¬æ‰“ç†å¥½äº†ï¼Œåˆ›å»º Flutter plugin çš„æ—¶å€™å°±é»˜è®¤å¸¦æœ‰ exampleã€‚ä¸Šé¢å¤§å›¾ 1 ä¸­ example æ–‡ä»¶å¤¹ä¸­çš„ç›®å½•ç»“æ„å°±å’Œä¸€ä¸ªæ™®é€šçš„ Flutter App ç›®å½•ç»“æ„ä¸€æ ·ï¼Œåªæ˜¯è¿™é‡Œ Flutter App ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¾èµ–çš„å¤–å±‚æ–‡ä»¶å¤¹çš„ flutter_volume æ’ä»¶ã€‚å¤§å›¾ 2 å’Œ å¤§å›¾ 3 æ‰“å¼€çš„å…¶å®å°±æ˜¯ example æ–‡ä»¶ä¸­ android å’Œ iOS é¡¹ç›®ã€‚\nè¿™ç§ Flutter å·¥å…·è‡ªåŠ¨ç”Ÿæˆçš„æ’ä»¶ç›®å½•ç»“æ„ç¡®å®å¯¹ç¨‹åºå‘˜éå¸¸å‹å¥½ï¼Œå†™äº†æ’ä»¶ç«‹é©¬å°±èƒ½åœ¨ demo ä¸­çœ‹åˆ°æ•ˆæœã€‚\n2ã€Flutter Native é€šä¿¡æ–¹å¼ Flutter åº”ç”¨å¯ä»¥åœ¨ iOS å’Œ Android å¹³å°è¿è¡Œï¼Œè‚¯å®šè¦å’ŒåŸç”Ÿç³»ç»Ÿè¿›è¡Œå„ç§å„æ ·çš„äº¤äº’ã€‚äº¤äº’çš„éƒ¨åˆ†ä¸»è¦æ˜¯åœ¨ flutter engine ä¸­ï¼Œä»¥åŠå¤§é‡çš„ flutter æ’ä»¶ä¸­ã€‚\nMethodChannel Flutter æ¡†æ¶æä¾›äº†è¿™æ ·çš„äº¤äº’æ–¹å¼ã€‚æ¶ˆæ¯é€šè¿‡ Method Channel åœ¨å®¢æˆ·ç«¯ï¼ˆUIï¼‰å’Œä¸»æœºï¼ˆplatformï¼‰ä¹‹é—´ä¼ é€’ã€‚å®˜æ–¹æ–‡æ¡£è¿™é‡Œä½¿ç”¨çš„æ˜¯Â platform channelsï¼Œç¿»è¯‘çš„æ—¶å€™æˆ‘ä½¿ç”¨äº†æ›´å…·ä½“ç›´æ¥çš„è¡¨è¿°Â Method Channelè§ä¸‹å›¾ï¼ˆå›¾ç‰‡æ¥æº https://flutter.dev/docs/development/platform-integration/platform-channelsï¼‰\nç¿»è¯‘ä¸€æ®µå®˜æ–¹çš„é‡Šä¹‰\n åœ¨å®¢æˆ·ç«¯ï¼ŒMethodChannel å¯ä»¥å‘é€ä¸æ–¹æ³•è°ƒç”¨ç›¸å¯¹åº”çš„æ¶ˆæ¯ã€‚ åœ¨å¹³å°æ–¹é¢ï¼ŒAndroid ä¸Šçš„ MethodChannelå’Œ iOS ä¸Šçš„ FlutterMethodChannel å…è®¸æ¥æ”¶æ–¹æ³•è°ƒç”¨å¹¶å‘é€å›ç»“æœã€‚ è¿™äº›ç±»ä½¿æ‚¨å¯ä»¥ä½¿ç”¨å¾ˆå°‘çš„â€œæ ·æ¿ä»£ç â€æ¥å¼€å‘å¹³å°æ’ä»¶ã€‚ æ³¨æ„ï¼šå¦‚æœéœ€è¦ï¼Œæ–¹æ³•è°ƒç”¨ä¹Ÿå¯ä»¥åå‘å‘é€ï¼Œå¹³å°å……å½“Dartä¸­å®ç°çš„æ–¹æ³•çš„å®¢æˆ·ç«¯ã€‚\n ä¸Šå›¾å½¢è±¡è¡¨è¾¾äº† Flutter å‘é€æ¶ˆæ¯åˆ° native ç«¯çš„è¿‡ç¨‹ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥åè¿‡æ¥ä» native ç«¯ä¸»åŠ¨å‘é€æ¶ˆæ¯åˆ° Flutter ç«¯ã€‚å³åœ¨ native ç«¯åˆ›å»º MethodChannel å¹¶è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼ŒFlutter ç«¯è¿›è¡Œæ–¹æ³•å¤„ç†å¹¶ä¸”å‘é€ä¼šæ–¹æ³•è°ƒç”¨ç»“æœã€‚å®é™…ä¸­æ›´å¸¸ç”¨çš„æ˜¯å¯¹äºè¿™ä¸ªæ¨¡å¼çš„æ›´é«˜ä¸€å±‚å°è£… EventChannelã€‚Native ç«¯è¿›è¡Œ event å‘é€ï¼ŒFlutter ç«¯è¿›è¡Œ event å“åº”ã€‚MethodChannel å’Œ EventChannel éƒ½ä¼šåœ¨åé¢å®æˆ˜ç¯èŠ‚ä½¿ç”¨åˆ°ï¼Œä¸€çœ‹å³ä¼šã€‚\nåœ¨ Flutter å®¢æˆ·ç«¯å’Œ native å¹³å°æ–¹é¢ä¼ é€’æ•°æ®éƒ½æ˜¯éœ€è¦ç»è¿‡ç¼–ç å†è§£ç ã€‚ç¼–ç çš„æ–¹å¼é»˜è®¤çš„æ˜¯ç”¨StandardMethodCodecï¼Œæ­¤å¤–è¿˜æœ‰Â JSONMethodCodecÂ ã€‚StandardMethodCodecç¼–è§£ç æ•ˆç‡æ›´é«˜ã€‚\nç¼–ç æ•°æ®ç±»å‹ MethodCodec æ”¯æŒçš„æ•°æ®ç±»å‹ä»¥åŠåœ¨ dart ã€iOS å’Œ Android ä¸­çš„å¯¹åº”å…³ç³»å¦‚ä¸‹è¡¨ã€‚\n   Dart Android iOS     null null nil (NSNull when nested)   bool java.lang.Boolean NSNumber numberWithBool:   int java.lang.Integer NSNumber numberWithInt:   int, if 32 bits not enough java.lang.Long NSNumber numberWithLong:   double java.lang.Double NSNumber numberWithDouble:   String java.lang.String NSString   Uint8List byte[] FlutterStandardTypedData typedDataWithBytes:   Int32List int[] FlutterStandardTypedData typedDataWithInt32:   Int64List long[] FlutterStandardTypedData typedDataWithInt64:   Float64List double[] FlutterStandardTypedData typedDataWithFloat64:   List java.util.ArrayList NSArray   Map java.util.HashMap NSDictionary    3ã€Volume æ¥å£ å‰é¢æåˆ°æ˜¯è¦åœ¨ä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨æ’ä»¶ä¸­è°ƒæ•´ç³»ç»Ÿçš„éŸ³é‡ã€‚ç»è¿‡æ¢³ç†ï¼Œå…ˆæ•´ç†å‡ºåˆæ­¥éœ€è¦çš„æ¥å£ã€‚ä¸»è¦æœ‰å¢å¤§éŸ³é‡ã€å‡å°éŸ³é‡ã€é™éŸ³ã€è·å–éŸ³é‡ã€è®¾ç½®éŸ³é‡ã€‚åŒæ—¶è¿˜æœ‰æ¿€æ´»éŸ³é‡å˜åŒ–ç›‘å¬ã€è®¾ç½®éŸ³é‡å˜åŒ–ç›‘å¬ã€å…³é—­éŸ³é‡å˜åŒ–ç›‘å¬ã€‚ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œè¿˜å¢åŠ äº†ä¸€ä¸ª VolumeWatcher çš„ Widgetï¼Œåœ¨å…¶ä¸­æˆå¯¹ä½¿ç”¨äº†æ–°å¢éŸ³é‡å˜åŒ–ç›‘å¬ï¼Œå–æ¶ˆéŸ³é‡å˜åŒ–ç›‘å¬æ¥å£ã€‚\néƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œå®Œæ•´ä»£ç è¯·Â ç‚¹å‡»é“¾æ¥æŸ¥çœ‹Â ã€‚\nclass VolumeVal { final double vol; final int type; } typedef VolumeCallback = void Function(VolumeVal value); class FlutterVolume { static const double _step = 1.0 / 16.0; static const MethodChannel _channel = const MethodChannel(\u0026#39;com.befovy.flutter_volume\u0026#39;); static _VolumeValueNotifier _notifier = _VolumeValueNotifier(VolumeVal(vol: 0, type: 0)); static StreamSubscription _eventSubs; void enableWatcher() { if (_eventSubs == null) { _eventSubs = EventChannel(\u0026#39;com.befovy.flutter_volume/event\u0026#39;) .receiveBroadcastStream() .listen(_eventListener, onError: _errorListener); _channel.invokeMethod(\u0026#34;enable_watch\u0026#34;); } } void disableWatcher() { _channel.invokeMethod(\u0026#34;disable_watch\u0026#34;); _eventSubs?.cancel(); _eventSubs = null; } static void _eventListener(dynamic event) { final Map\u0026lt;dynamic, dynamic\u0026gt; map = event; switch (map[\u0026#39;event\u0026#39;]) { case \u0026#39;vol\u0026#39;: double vol = map[\u0026#39;v\u0026#39;]; int type = map[\u0026#39;t\u0026#39;]; _notifier.value = VolumeVal(vol: vol, type: type); break; default: break; } } static Future\u0026lt;double\u0026gt; up({double step = _step, int type = STREAM_MUSIC}) { return _channel.invokeMethod(\u0026#34;up\u0026#34;, \u0026lt;String, dynamic\u0026gt;{ \u0026#39;step\u0026#39;: step, \u0026#39;type\u0026#39;: type, }); } static void addVolListener(VoidCallback listener) { _notifier.addListener(listener); } } class VolumeWatcher extends StatefulWidget { final VolumeCallback watcher; final Widget child; VolumeWatcher({ @required this.watcher, @required this.child, }); @override _VolumeWatcherState createState() =\u0026gt; _VolumeWatcherState(); } è¿™é‡Œæ—¢ä½¿ç”¨äº†Â MethodChannelï¼Œ ä¹Ÿä½¿ç”¨äº†Â EventChannelã€‚Flutter ä½¿ç”¨Â MethodChannel å‘é€æ–¹æ³•è°ƒç”¨è¯·æ±‚åˆ° native ä¾§ï¼Œå¹¶è·å–æ–¹æ³•çš„è°ƒç”¨ç»“æœã€‚ä¸ºäº†é¿å… UI å¡é¡¿ï¼Œæ–¹æ³•è°ƒç”¨éƒ½ä½¿ç”¨å¼‚æ­¥æ¨¡å¼ã€‚EventChannel åˆ™æ˜¯åœ¨ Flutter ç«¯å¤„ç† native å‘é€çš„äº‹ä»¶é€šçŸ¥ã€‚åœ¨ Flutter ä¸­ï¼Œæ‰€æœ‰ Channel çš„ name å¿…é¡»æ˜¯ä¸é‡å¤çš„ï¼Œå¦åˆ™æ¶ˆæ¯å‘é€ä¼šå‡ºé”™ã€‚\n MethodChannelÂ çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä½¿ç”¨ name å‚æ•°æ„é€ ä¸€ä¸ª MethodChannelÂ ï¼Œå¹¶ä½¿ç”¨ invokeMethodÂ è¿›è¡Œæ¶ˆæ¯å’Œå‚æ•°çš„å‘é€ï¼Œå¹¶è¿”å›å¼‚æ­¥çš„ç»“æœã€‚ EventChannelÂ ä½¿ç”¨ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†éƒ½æ˜¯ä¸€äº›æ ·æ¿ä»£ç ã€‚æ„é€  EventChannelÂ å¹¶ç›‘å¬äº‹ä»¶å¹¿æ’­ï¼Œæ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°å’Œé”™è¯¯å¤„ç†å‡½æ•°ã€‚ä½¿ç”¨å®Œæˆåå†å–æ¶ˆå¹¿æ’­è®¢é˜…ã€‚  æ¥å£è®¾è®¡ä¸­ï¼Œæˆ‘åŠ ä¸Šäº†ä¸åŒéŸ³é¢‘ç±»å‹çš„å¯é€‰å‚æ•° typeÂ ï¼Œä½†åœ¨åˆæœŸçš„å®ç°ä¸­ï¼Œåªä¼šå®ç°åª’ä½“å£°éŸ³ç±»å‹çš„ç›¸å…³åŠŸèƒ½ã€‚è¿™ä¸ªå¯é€‰å‚æ•°ä¿è¯åæœŸçš„åŠŸèƒ½å®ç°ï¼Œæ¥å£ä¸å‘ç”Ÿå˜åŒ–ã€‚\nå®Œæ•´çš„ä»£ç å˜æ›´å¯ä»¥çœ‹github ä¸Šè¿™ä¸ªæäº¤ã€‚https://github.com/befovy/flutter_volume/commit/c8ff0f583b3372d22f764bcaf377f1a6bc64cf39\n4ã€iOS åŠŸèƒ½å®ç° FlutterPluginRegistrar FlutterPluginRegistrar æ˜¯ flutter æ’ä»¶åœ¨ iOS ç¯å¢ƒä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæä¾›æ’ä»¶ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»¥åŠ App å›è°ƒäº‹ä»¶ä¿¡æ¯ã€‚FlutterPluginRegistrar çš„å®ä¾‹å¯¹è±¡éœ€è¦ä¿å­˜åœ¨ Plugin class çš„æˆå‘˜å˜é‡ä¸­ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚å°† FlutterVolumePlugin çš„æ— å‚ init å‡½æ•°è°ƒæ•´ä¸ºÂ initWithRegistrar ã€‚\n@implementation FlutterVolumePlugin + (void)registerWithRegistrar:(NSObject\u0026lt;FlutterPluginRegistrar\u0026gt; *)registrar { FlutterMethodChannel *channel = [FlutterMethodChannel methodChannelWithName:@\u0026#34;com.befovy.flutter_volume\u0026#34; binaryMessenger:[registrar messenger]]; FlutterVolumePlugin *instance = [[FlutterVolumePlugin alloc] initWithRegistrar:registrar]; [registrar addMethodCallDelegate:instance channel:channel]; } - (instancetype)initWithRegistrar: (NSObject\u0026lt;FlutterPluginRegistrar\u0026gt; *)registrar { self = [super init]; if (self) { _registrar = registrar; } return self; } @end iOS ç›‘å¬éŸ³é‡å˜åŒ– ios ç³»ç»Ÿé€šçŸ¥ä¸­å¿ƒæœ‰å…³äºéŸ³é‡å˜åŒ–çš„å¹¿æ’­ï¼Œç›‘å¬éŸ³é‡å˜åŒ–åªéœ€è¦åœ¨é€šçŸ¥ä¸­å¿ƒæ³¨å†Œé€šçŸ¥å³å¯ã€‚æ ¹æ®æ¥å£è®¾è®¡ï¼Œç›‘å¬ç³»ç»ŸéŸ³é‡å˜åŒ–ï¼Œæœ‰ä¸¤ä¸ªæ¥å£è°ƒç”¨æ§åˆ¶åŠŸèƒ½å¼€å¯æˆ–è€…å…³é—­ã€‚éŸ³é‡ç›‘å¬çš„ä¸»è¦ä»£ç å®ç°å¦‚ä¸‹ï¼š\n@implementation FlutterVolumePlugin - (void)enableWatch { if (_eventListening == NO) { _eventListening = YES; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChange:) name:@\u0026#34;AVSystemController_SystemVolumeDidChangeNotification\u0026#34; object:nil]; _eventChannel = [FlutterEventChannel eventChannelWithName:@\u0026#34;com.befovy.flutter_volume/event\u0026#34; binaryMessenger:[_registrar messenger]]; [_eventChannel setStreamHandler:self]; } } - (void)disableWatch { if (_eventListening == YES) { _eventListening = NO; [[NSNotificationCenter defaultCenter] removeObserver:self name:@\u0026#34;AVSystemController_SystemVolumeDidChangeNotification\u0026#34; object:nil]; [_eventChannel setStreamHandler:nil]; _eventChannel = nil; } } - (void)volumeChange:(NSNotification *)notification { NSString *style = [notification.userInfo objectForKey:@\u0026#34;AVSystemController_AudioCategoryNotificationParameter\u0026#34;]; CGFloat value = [[notification.userInfo objectForKey:@\u0026#34;AVSystemController_AudioVolumeNotificationParameter\u0026#34;] doubleValue]; if ([style isEqualToString:@\u0026#34;Audio/Video\u0026#34;]) { [self sendVolumeChange:value]; } } - (void)sendVolumeChange:(float)value { if (_eventListening) { NSLog(@\u0026#34;valume val %f\\n\u0026#34;, value); [_eventSink success:@{@\u0026#34;event\u0026#34; : @\u0026#34;volume\u0026#34;, @\u0026#34;vol\u0026#34; : @(value)}]; } } @end enableWatch ä¸­åœ¨é€šçŸ¥ä¸­å¿ƒæ³¨å†Œå…³äºéŸ³é‡å˜åŒ–çš„å¤„ç†å‡½æ•°ã€‚ç„¶åæ„é€ Â FlutterEventChannel å¹¶ä¸”è®¾ç½® handlerã€‚disableWatch ä¸­ç§»é™¤åœ¨é€šçŸ¥ä¸­å¿ƒæ³¨å†Œçš„å›è°ƒï¼Œç„¶ååˆ é™¤ EventChannel çš„ handlerï¼Œå¹¶åˆ é™¤ eventChannel å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdartä¸­Â EventChannel('xxx').receiveBroadcastStream()Â çš„è°ƒç”¨ä¸€å®šè¦åœ¨ native ç«¯æ‰§è¡Œå®ŒæˆÂ FlutterEventChannel setStreamHandlerÂ æ–¹æ³•ä¹‹åï¼Œå¦åˆ™ä¼šå‡ºç° onListenÂ æ–¹æ³•æ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚\nç³»ç»ŸéŸ³é‡ä¿®æ”¹ iOS ä¸­æ²¡æœ‰å…¬å¼€çš„ä¿®æ”¹ç³»ç»ŸéŸ³é‡æ¥å£ï¼Œä½†æ˜¯è¿˜æœ‰å…¶ä»–é€”å¾„å®ç°éŸ³é‡ä¿®æ”¹ã€‚ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å°±æ˜¯åœ¨ UI ä¸­æ’å…¥ä¸€ä¸ªä¸å¯è§çš„Â MPVolumeViewï¼Œç„¶åæ¨¡æ‹Ÿ UI æ“ä½œè°ƒæ•´å…¶ä¸­çš„Â MPVolumeSliderã€‚\n@implementation FlutterVolumePlugin - (void)initVolumeView { if (_volumeView == nil) { _volumeView = [[MPVolumeView alloc] initWithFrame:CGRectMake(-100, -100, 10, 10)]; _volumeView.hidden = YES; } if (_volumeViewSlider == nil) { for (UIView *view in [_volumeView subviews]) { if ([view.class.description isEqualToString:@\u0026#34;MPVolumeSlider\u0026#34;]) { _volumeViewSlider = (UISlider *)view; break; } } } if (!_volumeInWindow) { UIWindow *window = UIApplication.sharedApplication.keyWindow; if (window != nil) { [window addSubview:_volumeView]; _volumeInWindow = YES; } } } - (float)getVolume { [self initVolumeView]; if (_volumeViewSlider == nil) { AVAudioSession *audioSession = [AVAudioSession sharedInstance]; CGFloat currentVol = audioSession.outputVolume; return currentVol; } else { return _volumeViewSlider.value; } } - (float)setVolume:(float)vol { [self initVolumeView]; if (vol \u0026gt; 1.0) { vol = 1.0; } else if (vol \u0026lt; 0) { vol = 0.0; } [_volumeViewSlider setValue:vol animated:FALSE]; vol = _volumeViewSlider.value; return vol; } @end å®Œæ•´ iOS æ’ä»¶ä»£ç Â ç‚¹æˆ‘æŸ¥çœ‹\n5ã€Android åŠŸèƒ½å®ç° Android Flutter æ’ä»¶å¼€å‘ç¦»ä¸å¼€ flutter engine ä¸­çš„æ¥å£Â Registrarã€‚é€šè¿‡Â Registrar çš„æ–¹æ³•å¯ä»¥è·å– activityã€ context ç­‰ Android å¼€å‘ä¸­é‡è¦å¯¹è±¡ã€‚\nRegistrar public interface Registrar { Activity activity(); Context context(); Context activeContext(); .... } Â class FlutterVolumePlugin(registrar: Registrar): MethodCallHandler { companion object { @JvmStatic fun registerWith(registrar: Registrar) { val channel = MethodChannel(registrar.messenger(), \u0026#34;flutter_volume\u0026#34;) channel.setMethodCallHandler(FlutterVolumePlugin(registrar)) } } private val mRegistrar: Registrar = registrar } å¯¹è‡ªåŠ¨ç”Ÿæˆçš„ Plugin class è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ Â mRegistrar æˆå‘˜å˜é‡ï¼ˆè§ä¸Šé¢ä»£ç ç‰‡æ®µï¼‰ï¼Œåœ¨æˆå‘˜å‡½æ•°Â onMethodCallÂ ä¸­å¤„ç† method call çš„æ—¶å€™å°±å¯ä»¥è·å– activityã€context ç­‰é‡è¦å˜é‡ã€‚\næ¯”å¦‚ Android ç³»ç»Ÿä¸­éŸ³é‡ä¿®æ”¹ä½¿ç”¨çš„ AudioManager ã€‚\nclass FlutterVolumePlugin(registrar: Registrar): MethodCallHandler { private fun audioManager(): AudioManager { val activity = mRegistrar.activity() return activity.getSystemService(Context.AUDIO_SERVICE) as AudioManager } } Android ä¸­éŸ³é‡è°ƒèŠ‚åŠŸèƒ½çš„å®ç°ä¸»è¦å°±æ˜¯ AudioManager çš„ API è°ƒç”¨ï¼Œä»¥åŠå¯¹ flutter onMethodCall æ–¹æ³•çš„å¤„ç†ã€‚è¯¦ç»†çš„å†…å®¹è¯·ç‚¹å‡»æŸ¥çœ‹æºä»£ç ã€‚\nç›‘å¬éŸ³é‡çš„å˜åŒ– Android ç³»ç»Ÿä¸­ä½¿ç”¨å¹¿æ’­é€šçŸ¥Â BroadcastReceiver è·å–éŸ³é‡å˜åŒ–ã€‚æ ¹æ®æ¥å£è®¾è®¡ï¼Œç›‘å¬ç³»ç»ŸéŸ³é‡å˜åŒ–ï¼Œæœ‰ä¸¤ä¸ªæ¥å£è°ƒç”¨æ§åˆ¶åŠŸèƒ½å¼€å¯æˆ–è€…å…³é—­ã€‚åœ¨ enableWatchÂ æ–¹æ³•ä¸­ï¼Œå…ˆä¿®æ”¹æ ‡è®°å˜é‡ mWatchingÂ ï¼Œ ç„¶ååˆ›å»º EventChannelÂ å¹¶ä¸”è°ƒç”¨ setStreamHandlerÂ æ–¹æ³•ã€‚æœ€åï¼Œæ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ï¼Œæ¥å—ç³»ç»ŸéŸ³é‡å˜åŒ–çš„é€šçŸ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdartä¸­Â EventChannel('xxx').receiveBroadcastStream()çš„è°ƒç”¨ä¸€å®šè¦åœ¨ native ç«¯æ‰§è¡Œå®ŒæˆÂ setStreamHandlerÂ æ–¹æ³•ä¹‹åï¼Œå¦åˆ™ä¼šå‡ºç° onListenÂ æ–¹æ³•æ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚\nclass FlutterVolumePlugin(registrar: Registrar) : MethodCallHandler { private fun enableWatch() { if (!mWatching) { mWatching = true mEventChannel = EventChannel(mRegistrar.messenger(), \u0026#34;com.befovy.flutter_volume/event\u0026#34;) mEventChannel!!.setStreamHandler(object :EventChannel.StreamHandler { override fun onListen(o: Any?, eventSink: EventChannel.EventSink) { mEventSink.setDelegate(eventSink) } override fun onCancel(o: Any?) { mEventSink.setDelegate(null) } }) mVolumeReceiver = VolumeReceiver(this) val filter = IntentFilter() filter.addAction(VOLUME_CHANGED_ACTION) mRegistrar.activeContext().registerReceiver(mVolumeReceiver, filter) } } private fun disableWatch() { if (mWatching) { mWatching = false mEventChannel!!.setStreamHandler(null) mEventChannel = null mRegistrar.activeContext().unregisterReceiver(mVolumeReceiver) mVolumeReceiver = null } } } åœ¨è·å–éŸ³é‡å˜åŒ–é€šçŸ¥ BroadcastReceiver çš„ onReceive æ–¹æ³•ä¸­ï¼Œ ä½¿ç”¨ EventChannel å‘é€åˆ°äº‹ä»¶å†…å®¹åˆ° flutter ä¾§ã€‚\nprivate class VolumeReceiver(plugin: FlutterVolumePlugin) : BroadcastReceiver() { private var mPlugin: WeakReference\u0026lt;FlutterVolumePlugin\u0026gt; = WeakReference(plugin) override fun onReceive(context: Context, intent: Intent) { if (intent.action == \u0026#34;android.media.VOLUME_CHANGED_ACTION\u0026#34;) { val plugin = mPlugin.get() if (plugin != null) { val volume = plugin.getVolume() val event: MutableMap\u0026lt;String, Any\u0026gt; = mutableMapOf() event[\u0026#34;event\u0026#34;] = \u0026#34;vol\u0026#34; event[\u0026#34;v\u0026#34;] = volume event[\u0026#34;t\u0026#34;] = AudioManager.STREAM_MUSIC plugin.sink(event) } } } } class FlutterVolumePlugin(registrar: Registrar) : MethodCallHandler { fun sink(event: Any) { mEventSink.success(event) } } è¯¦ç»†çš„å†…å®¹è¯·ç‚¹å‡»æŸ¥çœ‹æºä»£ç ã€‚\néŸ³é‡åŒºé—´æ˜ å°„ åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒéŸ³é‡æœ€å¤§å€¼æœ‰å¯èƒ½ä¸ä¸€æ ·ï¼ŒèŒƒå›´ä¸æ˜¯ [0, 1]ã€‚æ­¤æ’ä»¶è·å–éŸ³é‡æœ€å¤§å€¼åï¼Œå°†éŸ³é‡åˆçº¿æ€§æ˜ å°„åˆ° [0, 1] çš„èŒƒå›´ä¸­ã€‚å¦ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œandroid éŸ³é‡è°ƒèŠ‚ä¸æ˜¯æ— çº§è°ƒèŠ‚ï¼Œæœ‰ä¸€ä¸ªè°ƒèŠ‚çš„æœ€å°å•å…ƒï¼Œå°†è¿™ä¸ªæœ€å°å•å…ƒæ˜ å°„åˆ° [0, 1] èŒƒå›´ä¸­çš„ä¸€ä¸ª delta å€¼ï¼Œå¹¶ä¿è¯è°ƒèŠ‚éŸ³é‡ step å€¼å¤§äºç­‰äºè¿™ä¸ªæœ€å°å•å…ƒ delta å€¼ï¼Œå¦åˆ™éŸ³é‡è°ƒèŠ‚æ— æ•ˆã€‚åœ¨æ’ä»¶çš„ API å®ç°ä¸­ï¼Œå¦‚æœè°ƒç”¨ upÂ æˆ–Â downÂ æ¥å£ï¼Œ stepÂ å‚æ•°å€¼å°äº deltaÂ ï¼Œåˆ™ä¼šè¢«ä¿®æ”¹ä¸º deltaÂ çš„å€¼ï¼Œä¿è¯Â upÂ æˆ–Â downÂ æ¥å£çš„è°ƒç”¨éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚\n6ã€æ’ä»¶ Demo flutter æ’ä»¶åˆ›å»ºçš„é»˜è®¤ç›®å½•ä¸­éƒ½åŒ…å«ä¸€ä¸ª example æ–‡ä»¶å¤¹ã€‚é‡Œé¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ flutter app å·¥ç¨‹ç›®å½•ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼å¼•ç”¨äº†å¤–å±‚æ–‡ä»¶å¤¹ä¸­çš„ flutter æ’ä»¶ã€‚\ndev_dependencies: flutter_volume: path: ../ åœ¨ lib/main.dart ä¸­å¼•å…¥æ’ä»¶Â import \u0026lsquo;package:flutter_volume/flutter_volume.dart\u0026rsquo;;\nç„¶åç®€å•å†™å‡ ä¸ªæŒ‰é’®ï¼Œåœ¨ onPressed ä¸­è°ƒç”¨Â flutter_volume.dart ä¸­çš„API å°±å¯ä»¥å®Œæ•´æ’ä»¶çš„ç¤ºä¾‹ Appã€‚è¯¦ç»†å†…å®¹è¯·çœ‹å®Œæ•´çš„æºä»£ç Â example/lib/main.dart\n7ã€å‘å¸ƒæ’ä»¶ å®Œæˆäº†æ’ä»¶æˆ–è€… dart åŒ…çš„å¼€å‘æµ‹è¯•ä¹‹åï¼Œå¯ä»¥å°†å…¶å‘å¸ƒåˆ°Â PubÂ ä¸Šï¼Œè¿™æ ·å…¶ä»–å¼€å‘äººå‘˜å°±å¯ä»¥å¿«æ·æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒã€‚Flutter çš„ä¾èµ–ç®¡ç† pubspec æ”¯æŒé€šè¿‡æœ¬åœ°è·¯å¾„å’Œ Git å¯¼å…¥ä¾èµ–ï¼Œä½†ä½¿ç”¨ pub å¯ä»¥æ›´æ–¹ä¾¿è¿›è¡Œæ’ä»¶ç‰ˆæœ¬ç®¡ç†ã€‚\n volumeÂ flutter_volume è¿™å‡ ä¸ªåå­—éƒ½å·²ç»è¢«å å‘äº†ï¼Œæˆ‘å°±æš‚æ—¶ä¸å‘å¸ƒåˆ° pub äº†\n å‘å¸ƒæ’ä»¶åˆ° pub ï¼Œéœ€è¦ç™»å½• google è´¦å·ï¼Œè¯·é¢„å…ˆå‡†å¤‡æ¢¯å­ã€‚\nåœ¨å‘å¸ƒä¹‹å‰ï¼Œå…ˆæ£€æŸ¥Â pubspec.yamlã€README.mdÂ ä»¥åŠÂ CHANGELOG.mdÂ ã€ LICENSEÂ æ–‡ä»¶ï¼Œä»¥ç¡®ä¿å…¶å†…å®¹çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚pubspec.yamlÂ é‡Œé™¤äº†æ’ä»¶çš„ä¾èµ–ï¼Œè¿˜åŒ…å«ä¸€äº›æ’ä»¶ä»¥åŠä½œè€…çš„å…ƒä¿¡æ¯ï¼Œéœ€è¦æŠŠè¿™äº›è¡¥ä¸Šï¼š\nname: flutter_volume description: A Plugin for Volume Control and Monitoring, support iOS and Android version: 0.0.1 author: befovy homepage: blog.befovy.com ç„¶å, è¿è¡Œ dry-run å‘½ä»¤ä»¥æŸ¥çœ‹æ’ä»¶æ˜¯å¦è¿˜æœ‰åˆ«çš„é—®é¢˜:\nflutter packages pub publish --dry-run å¦‚æœå‘½ä»¤è¾“å‡ºÂ Package has 0Â warningsÂ ï¼Œåˆ™è¡¨ç¤ºä¸€åˆ‡æ­£å¸¸ã€‚æœ€åï¼Œè¿è¡Œå‘å¸ƒå‘½ä»¤ flutter packages pub publishÂ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‘å¸ƒï¼Œä¼šæç¤ºéªŒè¯ Google è´¦å·ã€‚\nLooks great! Are you ready to upload your package (y/n)? y Pub needs your authorization to upload packages on your behalf. In a web browser, go to https://accounts.google.com/o/oauth2/auth?access_type=offline*****.....(çœç•¥ä¸€åƒå­—) Then click \u0026quot;Allow access\u0026quot;. Waiting for your authorization... Successfully authorized. Uploading... Successful uploaded package. æˆåŠŸæˆæƒä¹‹åä¾¿å¯ä»¥ç»§ç»­ä¸Šä¼ ï¼Œä¸Šä¼ æˆåŠŸåï¼Œä¼šæç¤º Successful uploaded packageÂ ã€‚å‘å¸ƒåï¼Œå¯ä»¥åœ¨Â https://pub.dartlang.org/packages/${plugin_name} æŸ¥çœ‹å‘å¸ƒæƒ…å†µã€‚\nå‚è€ƒèµ„æ–™  https://flutter.dev/docs/development/platform-integration/platform-channels\n","id":2,"section":"posts","summary":"\u003cblockquote\u003e\n\u003cp\u003eè®¤çœŸè¯»å®Œæœ¬æ–‡å°±èƒ½æŒæ¡ç¼–å†™ä¸€ä¸ª Flutter ç³»ç»ŸéŸ³é‡æ’ä»¶çš„æŠ€èƒ½ï¼Œæ”¯æŒè°ƒèŠ‚ç³»ç»ŸéŸ³é‡ä»¥åŠç›‘å¬ç³»ç»ŸéŸ³é‡å˜åŒ–ã€‚\nå¦‚æœ‰ä¸å½“ä¹‹å¤„æ•¬è¯·æŒ‡æ­£ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c!-- raw HTML omitted --\u003e","tags":["Flutter"],"title":"æ‰‹æŠŠæ‰‹å¸¦ä½ å†™ Flutter ç³»ç»ŸéŸ³é‡æ’ä»¶","uri":"https://blog.befovy.com/2019/11/flutter-plugin-volume/","year":"2019"},{"content":"ç»™ ijkplayer å¢åŠ äº† cmake æ„å»ºæ–¹å¼ï¼Œæ”¯æŒåœ¨ android studio ä¸­è¿›è¡Œ c ä»£ç æ–­ç‚¹è°ƒè¯•ã€‚\nç›´æ¥ä¸Šæ‰‹è¯·å‰å¾€ https://github.com/befovy/ijkplayer#build-android-via-cmake\nå¦‚æœæƒ³äº†è§£ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹è¯·ç»§ç»­é˜…è¯»æœ¬æ–‡ã€‚\nijkplayer ç®€ä»‹ ijkplayer æ˜¯ç”± B ç«™å¼€æºçš„ä¸€æ¬¾ç§»åŠ¨ç«¯æ’­æ”¾å™¨ã€‚åŸºäº ffmpeg ä¸­ ffplay å¼€å‘ï¼Œå¹¶æ·»åŠ  android MediaCodecã€iOS VideotTolbox è§†é¢‘ç¡¬è§£ç æ”¯æŒä»¥åŠ openglesã€NativeWindow(android) æ¸²æŸ“ï¼Œåœ¨å½“å‰çš„ç§»åŠ¨ç›´æ’­çƒ­æ½®ä¸­ï¼Œè¢«å¤§é‡ä½¿ç”¨ã€‚ ä½†ä½¿ç”¨ ijkplayer è¿›è¡Œ android æ’­æ”¾å™¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒè¯•èµ·æ¥ç¨å¾®æœ‰äº›éº»çƒ¦ï¼Œå®˜æ–¹æä¾›äº†ndk è°ƒè¯•çš„å‡ ä¸ªpatch æ–‡ä»¶ï¼Œå¹¶ä¸”æœ‰ä¸€æ®µæè¿°ï¼Œæ˜¯åŸºäº ndk-build android.mk å·¥å…·é“¾æ„å»ºçš„ã€‚è¯´å®è¯ç”±äºæ²¡æœ‰åšæˆå¼€ç®±å³ç”¨ï¼Œæˆ‘ä¹Ÿæ²¡è®¤çœŸçœ‹è¿‡è¿™éƒ¨åˆ†å†…å®¹ã€‚ ç”±äºæˆ‘å¯¹ cmake çš„äº†è§£æ›´å¤šä¸€äº›ï¼ŒåŠ ä¹‹ google å®˜æ–¹ä¹Ÿé€æ¸å°† ndk çš„å·¥å…·é“¾ç”± ndk-build è½¬å‘ cmakeï¼Œå¹¶åœ¨ android studio ä¸­å¯¹ cmake æä¾›äº†æ›´å¥½çš„æ”¯æŒã€‚åŒæ—¶ cmake ä¹Ÿæ˜¯è·¨å¹³å°çš„æ„å»ºå·¥å…·ï¼Œæ–¹ä¾¿åç»­å°† ijkplayer æ‰©å±•è‡³å…¶å®ƒå¹³å°ï¼Œæ‰€ä»¥æˆ‘ç”¨ cmake é‡æ–°å®ç°äº† ijkplayer çš„æ„å»ºè¿‡ç¨‹ã€‚\nåªè¦ä¸æ˜¯ä¿®æ”¹ ffmpeg çš„æºä»£ç ï¼Œå…¶å®ƒå†…å®¹åŒ…æ‹¬ ijkplayer çš„ c ä»£ç ä¿®æ”¹ï¼Œ java å±‚ä¿®æ”¹ï¼Œéƒ½å¯ä»¥åœ¨ android studio ä¸­ä¸€é”®è¿è¡Œã€è°ƒè¯•ã€‚\nå…³äº ijkplayer å†…éƒ¨æ ¸å¿ƒä»£ç çš„åˆ†æï¼Œå¤šä¸ªçº¿ç¨‹çš„å·¥ä½œå†…å®¹ï¼Œè§£ç éƒ¨åˆ†ï¼ŒéŸ³è§†é¢‘åŒæ­¥æ§åˆ¶ç­‰éƒ¨åˆ†çš„æ›´æ·±å…¥çš„ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒé‡‘å±±äº‘è§†é¢‘çš„åˆ†ææ–‡ç«  https://www.jianshu.com/p/daf0a61cc1e0 ï¼Œ æˆ‘æœ€å¼€å§‹ä¹Ÿæ˜¯ä»è¿™ä¸€ç¯‡æ–‡ç« å…¥æ‰‹é€æ¸è¯»æ‡‚ ijkplayer æºä»£ç çš„ã€‚\né¢˜å¤–è¯ï¼šijkplayer åœ¨ github ä¸Šçš„æäº¤è®°å½•è‡ª k0.8.8 ç‰ˆæœ¬ä¹‹åå°±å†ä¹Ÿæ²¡æœ‰äº†ï¼Œå¥½å¤šäººè¯„è®ºè¯´é¡¹ç›®å·²ç»æ”¾å¼ƒç»´æŠ¤äº†ï¼Œä½†æ˜¯ç»†å¿ƒå¯»æ‰¾ä¼šå‘ç°åœ¨å¦ä¸€ä¸ªé¡¹ç›® Bilibili/ffmpeg ä¸­ï¼Œè¿˜ä¸æ–­æœ‰æäº¤è®°å½•ã€‚è¯´æ˜é¡¹ç›®è¿˜æ˜¯åœ¨ä¸æ–­å¼€å‘ï¼Œåªæ˜¯é‡å¿ƒæ”¾åœ¨å®ç°æ–°çš„ ffmpeg protocol ä¸Šï¼Œæ²¡æœ‰åŠæ—¶ç»´æŠ¤ ijkplayer é¡¹ç›®ä¸Šçš„ issuesã€‚\nä¸‹é¢å…·ä½“è¯´è¯´ä¸€äº›å…·ä½“çš„ä¿®æ”¹å†…å®¹ã€‚\nandroid å·¥ç¨‹ç»“æ„è°ƒæ•´ ijkplayer çš„é¡¹ç›®æœ¬èº«å…·æœ‰å¤šä¸ª android moduleã€‚\nijkplayer-arm64\rijkplayer-armv5\rijkplayer-armv7a\rijkplayer-x86\rijkplayer-x86_64 # ä¸Šé¢å‡ ä¸ªéƒ½æ˜¯ä¸€ä¸ªmodule å£³ï¼Œshell å‘½ä»¤ç¼–è¯‘å¥½ so åº“æ”¾åœ¨æŒ‡å®šç›®å½•ä¸­\rijkplayer-example # ç¤ºä¾‹APPé¡¹ç›®\rijkplayer-exo # å¯¹ google exoplayer çš„ä¸€å±‚å°è£…é€‚ï¼Œé…åˆijkplayer å®šä¹‰çš„ mediaplyer æ¥å£\rijkplayer-java # ijkplayer java å±‚ä»£ç ï¼Œå¯¹æ¥ native å±‚ä»£ç ï¼Œä»¥åŠç¡¬è§£ç å™¨çš„é€‰æ‹©\ré¡¹ç›®ä¸­ä¸ºä¸åŒçš„ cpu æ¶æ„éƒ½å•ç‹¬è®¾ç½®äº† moduleï¼Œè¿™å‡ ä¸ª module æœ€å¤§çš„åŒºåˆ«å°±æ˜¯åœ¨ Application.mk ä¸­ APP_ABI å’Œ APP_PLATFORM çš„å€¼ä¸åŒï¼Œå…¶ä¸­ APP_PLATFORM å–å€¼å’Œ build.gradle ä¸­å®šä¹‰çš„ minSdkVersion ç›¸åŒã€‚ ijkplayer æœ€ä½ç«Ÿç„¶æ”¯æŒ sdk version 9ï¼Œç¡®å®æ„Ÿè°¢ B ç«™é¡¹ç›®ç»„åˆæœŸåœ¨è¿™æ–¹é¢çš„è¾›è‹¦ä»˜å‡ºã€‚\nè¿™ç§ module ç¡®å®æ–¹ä¾¿é‡‡ç”¨ ndk-build å·¥å…·çš„é¡¹ç›®ç®¡ç†ï¼Œä½†æ˜¯æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜æ˜¯è§‰å¾—æœ‰äº›ä¸å¤ªæ–¹ä¾¿ä¹‹å¤„ï¼š\n åœ¨ android studio ä¸­æœç´¢ c ä»£ç ï¼Œæœç´¢ç»“æœä¸­é‡å¤å‡ºç°å¤šæ¬¡ android studio ä¸­çš„ c ä»£ç æ²¡æœ‰è¯­æ³•é«˜äº®ã€‚  å¯¹äºé—®é¢˜1ï¼Œæˆ‘æ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š\n//NOTE:: run `./gradlew ideaModule` to apply exclude dirs\rapply plugin: \u0026#39;idea\u0026#39;\ridea.module {\rexcludeDirs += file(\u0026#39;ijkplayer-armv7a/src/\u0026#39;)\rexcludeDirs += file(\u0026#39;ijkplayer-arm64/src/\u0026#39;)\rexcludeDirs += file(\u0026#39;ijkplayer-armv5/src/\u0026#39;)\rexcludeDirs += file(\u0026#39;ijkplayer-x86/src/\u0026#39;)\rexcludeDirs += file(\u0026#39;ijkplayer-x86_64/src/\u0026#39;)\r}\råœ¨å·¥ç¨‹æ ¹ build.gradle ä¸­å¢åŠ è¿™æ ·çš„é…ç½®ï¼Œå¹¶æ‰§è¡Œ ./gradlew ideaModuleï¼Œ å°±ä¼šåœ¨æœç´¢ç»“æœä¸­æ’é™¤æ¥è‡ªè¿™å‡ ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ã€‚\nå¯¹äºé—®é¢˜2ï¼Œæˆ‘å½“ç„¶æ˜¯ç”¨ cmake è§£å†³äº†ï¼Œæ–°å»ºä¸€ä¸ª module, å–å fijkplayer-fullã€‚æ¢ä¸ªåå­—æ–¹ä¾¿å’ŒåŸé¡¹ç›®è¿›è¡ŒåŒºåˆ†ï¼ŒåŒæ—¶ f ä¹Ÿè¡¨ç¤ºfull, æˆ‘åœ¨è¿™ä¸ª module ä¸­å›Šæ‹¬äº†åŸæ¥ 6 ä¸ª module æä¾›çš„å†…å®¹ã€‚ f è¿˜æœ‰åˆ«çš„å«ä¹‰ï¼Œæœ‰æœºä¼šåœ¨å…¶å®ƒåœ°æ–¹ä¼šæåˆ°ã€‚ åœ¨ fijkplayer-full çš„ build.gradel ä¸­å¢åŠ  cmake çš„é…ç½®ä»¥åŠå¼•å…¥ ijkplayer-java module çš„ java æºä»£ç ã€‚\nandroid {\r.......\r.......\rsourceSets.main {\rjava.srcDirs = [\u0026#34;$rootProject.rootDir/ijkplayer-java/src/main/java/\u0026#34;]\rjni.srcDirs = [] // This prevents the auto generation of Android.mk\r }\rexternalNativeBuild {\rcmake {\rpath \u0026#39;src/main/CMakeLists.txt\u0026#39;\r}\r}\r}\rä¿®æ”¹åï¼Œfijkplayer-full å°±æˆäº† \u0026ldquo;å…­ç¥åˆä½“\u0026rdquo; äº†ã€‚\nå¯¹äºä¸åŒcpu æ¶æ„åŒºåˆ†ä¸åŒçš„ minSdkVersion å¯ä»¥é€šè¿‡ productFlavors å®ç°ï¼Œè¿™ä¸€å—æˆ‘è¿˜æ²¡æœ‰å…·ä½“è€ƒè™‘å……åˆ†ï¼Œç›®å‰æ˜¯ç»Ÿä¸€è®¾ç½®äº†å¤§å®¶ç”¨å¾—æœ€å¤šçš„ minSdkVersion 16ã€‚\næ­¤éƒ¨åˆ†ä¿®æ”¹çš„å®Œæ•´å†…å®¹ç‚¹æˆ‘æŸ¥çœ‹, github.com/befovy/ijkplayer\nCMakeLists.txt ç¼–å†™ CMakeLists.txt å®Œå…¨æ˜¯ä¸ªç¿»è¯‘å·¥ä½œï¼Œå°† Android.mk ä¸­çš„è§„åˆ™ç¿»è¯‘è¿‡æ¥å°±è¡Œã€‚å®Œæˆåé€šè¿‡ CMake æ–¹å¼æœ€ç»ˆç”Ÿæˆçš„ aar å’ŒåŸå§‹æ–¹å¼ç”Ÿæˆçš„aar æ–‡ä»¶å¤§å°å‡ ä¹æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œè§ä¸‹å›¾ã€‚ fijkplayer-full åªç¼–è¯‘äº† armv7a æ¶æ„ï¼Œå’Œ ijkplayer-armv7a æ¨¡å—ç¼–è¯‘ç»“æœçš„å¯¹æ¯”ã€‚ fijkplayer-full ä¸­ classes.jar è¾ƒå¤§æ˜¯å› ä¸ºåŒ…å«äº† ijkplayer-java module ä¸­çš„å†…å®¹ã€‚ è¿˜å¯ä»¥è°ƒæ•´CMake å‚æ•°è¿›ä¸€æ­¥å‡å°ç”Ÿæˆåº“çš„å¤§å°ã€‚ è½¬åˆ° CMake å·¥å…·é“¾çš„è¿‡ç¨‹è¿˜é‡åˆ°ä¸‹é¢å‡ ä¸ªé—®é¢˜ã€‚\nlibffmpeg.so æ‰¾ä¸åˆ°\nlibffmpeg.so æ˜¯äº‹å…ˆé€šè¿‡ shell å‘½ä»¤ç¼–è¯‘æˆçš„ï¼Œåœ¨ ffmpeg build æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”å‡ ä¹ä¸ä¼šæ”¹å˜ï¼Œé™¤éæ˜¯è¦ä¿®æ”¹ ffmpegã€‚ åœ¨ CMake ä¸­é€šè¿‡\nadd_library(ijkffmpeg SHARED IMPORTED)set_target_properties( # Specifies the target library.\r ijkffmpeg\r PROPERTIES\r IMPORTED_LOCATION ${FFMPAG_SHARED_DIR}/libijkffmpeg.so\r )å¼•å…¥é¢„ç¼–è¯‘å¥½çš„ ijkffmpegï¼Œåœ¨ç¼–è¯‘ ijkplayer çš„è¿‡ç¨‹å¯ä»¥é¡ºåˆ©å®Œæˆé“¾æ¥ã€‚ä½†æ˜¯æ‰“åŒ…è¿è¡Œæ‰¾ä¸åˆ° libijkffmpeg.soã€‚åˆ†ææœ€ç»ˆçš„ apk ä»¥åŠ fijkplayer-full.aar ï¼Œå‘ç°å…¶ä¸­éƒ½æ²¡æœ‰ libijkffmpeg.so æ–‡ä»¶ï¼Œæ‰€ä»¥æ˜¯æ‰“åŒ… aar çš„æ—¶å€™æ²¡æœ‰å°†è¿™ä¸ªæ–‡ä»¶æ‰“åŒ…è¿›å»ã€‚æŸ¥çœ‹å·¥ç¨‹ç›®å½•ç»“æ„ï¼Œå‘ç°ç¼–è¯‘å¥½çš„ libijkplayer.so å’Œ libijksdl.so éƒ½åœ¨æ–‡ä»¶å¤¹ /build/intermediates/cmake/debug/obj/armeabi-v7a ä¸­ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¿®æ”¹ CMakeLists.txt åœ¨æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™å°† libijkffmpeg.so å¤åˆ¶è¿‡å»ã€‚æœ€åçš„è§£å†³æ–¹æ¡ˆæ˜¯\nadd_library(ijkffmpeg SHARED IMPORTED)set_target_properties( # Specifies the target library.\r ijkffmpeg\r PROPERTIES\r IMPORTED_LOCATION ${FFMPAG_SHARED_DIR}/libijkffmpeg.so\r )add_custom_target(cpffmpeg\r COMMAND mkdir -p ${CMAKE_LIBRARY_OUTPUT_DIRECTORY} COMMAND cp ${FFMPAG_SHARED_DIR}/libijkffmpeg.so ${CMAKE_LIBRARY_OUTPUT_DIRECTORY} )add_dependencies(ijkffmpeg cpffmpeg)æ²¡æœ‰æ‰¾åˆ°ä¸€æ¡å‘½ä»¤èƒ½å¤Ÿè§£å†³çš„ï¼Œæ‰€ä»¥éº»çƒ¦äº†ä¸€ç‚¹å¤šå†™äº†ç‚¹ï¼Œç”¨ä¸¤ä¸ªcmake å‘½ä»¤è§£å†³ã€‚\ncpufeatures ç¼–è¯‘å‡ºé”™\nåŸé¡¹ç›®ä¸­ç”¨åˆ°äº† ndk ä¸­çš„ cpufeaturesï¼Œæˆ‘åœ¨ CMake æ–‡ä»¶ä¸­ä¹Ÿå¼•å…¥å¹¶ç¼–è¯‘äº† cpufeaturesï¼Œä½†åœ¨ç¼–è¯‘ x86 ä»¥åŠ x86_64 æ¶æ„çš„æ—¶å€™å´å‡ºç°äº†ç¼–è¯‘é”™è¯¯ï¼Œå…·ä½“æ˜¯ä¸€å¤„æœªè¯†åˆ«çš„æ±‡ç¼–æŒ‡ä»¤ã€‚ æœ€åå‘ç°æ˜¯ ndk r15c ç‰ˆæœ¬ä¸­ æ–‡ä»¶ $ANDROID_NDK/sources/android/cpufeatures/cpu-features.c ä¸­å°‘äº†å‡ ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¥ä¸Šä¹‹åï¼ˆä¸‹é¢å†…å®¹ï¼‰ç¼–è¯‘å°±æ²¡é—®é¢˜äº†ã€‚\nstatic __inline__ void x86_cpuid(int func, int values[4])\r{\rint a, b, c, d;\r/* We need to preserve ebx since we\u0026#39;re compiling PIC code */\r/* this means we can\u0026#39;t use \u0026#34;=b\u0026#34; for the second output register */\r__asm__ __volatile__ ( \\\r\u0026#34;push %%ebx\u0026#34;\r\u0026#34;cpuid\\n\u0026#34; \\\r\u0026#34;mov %%ebx, %1\\n\u0026#34;\r\u0026#34;pop %%ebx\\n\u0026#34;\r: \u0026#34;=a\u0026#34; (a), \u0026#34;=r\u0026#34; (b), \u0026#34;=c\u0026#34; (c), \u0026#34;=d\u0026#34; (d) \\\r: \u0026#34;a\u0026#34; (func) \\\r);\rvalues[0] = a;\rvalues[1] = b;\rvalues[2] = c;\rvalues[3] = d;\r}\ræ„å¤–çš„æ˜¯æˆ‘æœ€ç»ˆå‘ç° ijkplayer é¡¹ç›®ä¸­æ²¡æœ‰ç”¨åˆ° cpufeatures çš„åœ°æ–¹ï¼Œå¯èƒ½æ˜¯ gpl åè®®çš„ android-ndk-profiler éƒ¨åˆ†ç”¨äº†å§ï¼Œä½†é¡¹ç›®ä¸­é»˜è®¤ä½¿ç”¨äº†ä¸€ä¸ªå‡çš„ android-ndk-profilerï¼Œæ­¤éƒ¨åˆ†æ²¡æœ‰å»æ·±ç©¶ï¼Œæ€§èƒ½åˆ†æä½¿ç”¨ simpleperf å°±è¶³å¤Ÿäº†ã€‚ æœ€åè¿˜æ˜¯å»æ‰ CMake ä¸­ cpufeatures çš„éƒ¨åˆ†ã€‚\næ­¤éƒ¨åˆ† CMakeLists.txt çš„å®Œæ•´å†…å®¹è¯·çœ‹\nhttps://github.com/befovy/ijkplayer/blob/master/android/ijkplayer/fijkplayer-full/src/main/CMakeLists.txt\nhttps://github.com/befovy/ijkplayer/blob/master/ijkmedia/CMakeLists.txt\nhttps://github.com/befovy/ijkplayer/blob/master/ijkmedia/ijkplayer/CMakeLists.txt\nhttps://github.com/befovy/ijkplayer/blob/master/ijkmedia/ijksdl/CMakeLists.txt\nç»“æŸè¯­ ğŸ˜„ é™„ä¸€å¼  NDK æ–­ç‚¹è°ƒè¯•çš„å¤§å›¾ ğŸ‘\nåˆšå¼€å§‹å†™åšå®¢ï¼Œå¯èƒ½æœ‰äº›å•°å—¦ï¼Œå¤šå¤šåŒ…æ¶µã€‚æˆ–æ˜¯æ²¡æœ‰è¯´æ˜ç™½çš„åœ°æ–¹ï¼Œè¯·å¤§æ–¹çš„å‰å¾€åŸå§‹åœ°å€è¿›è¡Œè¯„è®ºã€‚\næœ€è¿‘å¯¹ Flutter äº§ç”Ÿäº†å…´è¶£ï¼Œå¹¶æ‰“ç®—ç”¨ ijkplayer å¼€å‘ä¸€ä¸ª Flutter çš„æ’­æ”¾å™¨ Pluginï¼Œ ç¥æˆ‘æ—©æ—¥å®Œæˆã€‚\n æœ¬æ–‡é€šè¿‡ mirror å’Œ hugo ç”Ÿæˆï¼ŒåŸå§‹åœ°å€ https://github.com/befovy/blogback/issues/5\n ","id":3,"section":"posts","summary":"ç»™ ijkplayer å¢åŠ äº† cmake æ„å»ºæ–¹å¼ï¼Œæ”¯æŒåœ¨ android studio ä¸­è¿›è¡Œ c ä»£ç æ–­ç‚¹è°ƒè¯•ã€‚ ç›´æ¥ä¸Šæ‰‹è¯·å‰å¾€ https://github.com/befovy/ijkplayer#build-android-via-cmake å¦‚æœæƒ³äº†è§£ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹è¯·ç»§ç»­é˜…è¯»æœ¬æ–‡ã€‚ ijkplayer ç®€ä»‹ ijkplayer æ˜¯ç”± B ç«™å¼€æºçš„ä¸€æ¬¾ç§»åŠ¨ç«¯","tags":null,"title":"ç”¨ CMake ä¸º ijkplayer å¢åŠ  android native debug æ”¯æŒ","uri":"https://blog.befovy.com/2019/06/issue_20190630_5/","year":"2019"},{"content":"ä¸€ç›´è§‰å¾— Issue æ˜¯ä¸ªç‰¹åˆ«å¥½ç”¨çš„è®°å½•å·¥å…·ï¼Œçœ‹åˆ°å¾ˆå¤šäººä¹Ÿç›´æ¥æŠŠ Issue ä½œä¸ºä¸ªäººåšå®¢ã€‚ Issue å¯ä»¥ç¢ç‰‡åŒ–çš„è®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç„¶ååœ¨è¿›è¡Œæ•´ç†ï¼Œæœ€ç»ˆå½¢æˆä¸€ç¯‡ä¸é”™çš„åšå®¢å†…å®¹ã€‚\nIssue é€‚åˆè®°å½•åšå®¢ï¼Œä½†æˆ‘è§‰å¾—ç›´æ¥ä»¥ Issue çš„å½¢å¼å°†å†…å®¹å±•ç¤ºç»™è¯»è€…è¿˜æ˜¯ç¼ºå°‘äº†åšå®¢æœ¬æ¥çš„æ ·å­ã€‚æ¯•ç«ŸIssueä¸æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ã€‚\næˆ‘é’ççš„å½¢å¼æ˜¯ï¼šé€šè¿‡ Issue è¿›è¡Œå†™ä½œï¼Œç„¶åè‡ªåŠ¨å‘å¸ƒåˆ°åšå®¢ç«™ç‚¹ã€‚ æ‰€ä»¥å°±äº§ç”Ÿäº† mirror è¿™ä¸ªå·¥å…·ã€‚\nmirror èƒ½å¤Ÿè‡ªåŠ¨æŠ“å– github é¡¹ç›®é‡Œçš„ issueï¼Œå¹¶è¾“å‡ºä¸º hugo æ”¯æŒçš„æ„å»ºæ ¼å¼ã€‚ é€šè¿‡ hugo è‡ªåŠ¨ç”Ÿæˆé™æ€ç½‘é¡µï¼Œæœ€ç»ˆé€šè¿‡è‡ªåŠ¨å·¥å…·å®ç°éƒ¨ç½²ã€‚\nä½¿ç”¨ github webhooks ä»¥åŠå¾ˆå°‘çš„è‡ªåŠ¨åŒ–è„šæœ¬å°±å¯ä»¥å®ç°è¿™ä¸ªè¿‡ç¨‹çš„å…¨è‡ªåŠ¨åŒ–ã€‚\nmirror mirror é€šè¿‡ github æä¾›çš„ graphql è¿›è¡Œ Issues å†…å®¹æŠ“å–ã€‚\né€šè¿‡ä¸€äº›è‡ªå®šä¹‰è§„åˆ™ï¼Œå®ç° Issues å†…å®¹çš„åˆ†ç±»æå–ï¼Œå¹¶æ•´ç†è¾“å‡ºåšå®¢å†…å®¹ã€‚\nmirror è§„åˆ™\nmirror é…ç½®æ–‡ä»¶ mirror çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ yaml æ ¼å¼ï¼Œ å‚è€ƒ conf.yaml é»˜è®¤æŸ¥æ‰¾è¿è¡Œç›®å½•ä¸‹çš„mirror.yaml ä½œä¸ºè¾“å…¥é…ç½®æ–‡ä»¶\né…ç½®æ–‡ä»¶ä¸­å¯å®šä¹‰å¤šä¸ªå†…å®¹æ¥æºã€‚ æ¯ä¸€ç§ä¸åŒçš„å†…å®¹æ¥æºï¼Œéƒ½æœ‰å…¶å…·ä½“çš„é…ç½®é¡¹ã€‚\nå†…å®¹æ¥æº \u0026ldquo;issues\u0026rdquo; å…·ä½“çš„é…ç½®å†…å®¹æœ‰\n token: github token, éœ€è¦æœ‰ issue è¯»å–æƒé™ login: github username repo: è¦æŠ“å–çš„ issue æ‰€åœ¨çš„ repo åç§° prefix: è¾“å‡ºæ–‡ä»¶åçš„ç»Ÿä¸€å‰ç¼€ output: è½¬æ¢æˆ hugo åšå®¢å†…å®¹åçš„æœ¬åœ°è¾“å‡ºç›®å½•ï¼Œå»ºè®®æŒ‡å®šä¸º hugo åšå®¢çš„ content ç›®å½•  å†…å®¹æ¥æº Issue çš„æŠ“å–è§„åˆ™\n draft  æ‰“å¼€çš„Issue è§†ä¸ºåšå®¢è‰ç¨¿ï¼Œä¸æŠ“å–ã€‚åªæŠ“å–å·²ç»å…³é—­çš„ Issue å†…å®¹ã€‚\ncontent  issue æœ¬èº«æœ‰ body å’Œ commentã€‚ æ–°å»ºissueæ—¶çš„å†…å®¹æ˜¯bodyï¼Œ ä¹‹åæ‰€æœ‰é¡¹ç›®æœ¬äººå’Œå…¶å®ƒ githuber çš„è¿½åŠ çš„å†…å®¹éƒ½æ˜¯è¯„è®ºã€‚\nMirror æ”¯æŒå°† Issue body å’Œ comment éƒ½æŠ“å–ä¸‹æ¥ä½™ä¸bodyéƒ¨åˆ†æ‹¼æ¥åˆå¹¶ä½œä¸ºå®Œæ•´åšå®¢å†…å®¹ã€‚\nç”±äº Issue éƒ½æ˜¯å…¬å¼€çš„ï¼Œå¯èƒ½ä¼šè¢«åˆ«äººè¯„è®ºï¼Œä½œè€…è¿˜å¯èƒ½å›å¤æé—®è€…ã€‚ ä¸ºäº†åŒºåˆ†è¿™ç§æƒ…å†µï¼Œmirror åªæ‹¼æ¥ comment ä½œè€…æ˜¯é¡¹ç›®ä½œè€…æœ¬äººï¼Œ ä¸”åœ¨ comment å¼€å¤´æœ‰ä¸€å¥ html \u0026lt;!--mirror--\u0026gt; æ³¨é‡Šè¯­å¥çš„commentã€‚\nhugo hugo æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é™æ€é¡µé¢ç”Ÿæˆå™¨ï¼Œå¯ä»¥æŠŠ markdown å†…å®¹ï¼Œæ­é…å„ç§ä¸»é¢˜ç”Ÿæˆä½ æƒ³è¦çš„é™æ€åšå®¢å†…å®¹ã€‚ è¿™äº›å†…å®¹æ‰˜ç®¡åœ¨ github pages ä¸Šåšå®¢å°±éƒ¨ç½²å¥½äº†ã€‚\nå®Œæ•´æ­¥éª¤   ç”Ÿæˆé¡¹ç›® åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»º blog ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­ç”Ÿæˆhugo é¡¹ç›®çš„åŸºæœ¬é…ç½®\nhugo new site ./blog\r  åˆ›å»ºåšå®¢æ‰€éœ€çš„githubé¡¹ç›® github ä¸Šå­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ä»“åº“åï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆé™æ€ç«™ç‚¹æ–¹æ–‡ä»“åº“ä¸­çš„ html æ–‡ä»¶ã€‚ è¿™ä¸ªä»“åº“çš„å…·ä½“å‘½åè§„åˆ™æ˜¯ï¼Œ \u0026lt;ä½ çš„githubè´¦å·\u0026gt;.github.io\næ¯”å¦‚ befovy.github.io å¯¹åº”è‡ªåŠ¨ç”Ÿæˆç½‘ç«™çš„ç½‘å€å°±æ˜¯è¿™ä¸ªä»“åº“çš„åç§°ï¼Œhttps://befovy.github.io\n  åœ¨ç¬¬äºŒæ­¥çš„github ä»“åº“ä¸­åˆ›å»ºåšå®¢å†…å®¹ æ–°å»º issue ï¼Œè®°å½•ä½ çš„æƒ³æ³•ï¼Œå®Œæˆä¹‹åå…³é—­ issueã€‚ å¦‚æœæƒ³è®©ä¸€äº›issue è¯„è®ºåœ¨æœ€ç»ˆç”Ÿæˆçš„åšå®¢é¡µé¢ä¸­ä¹Ÿå¯è§ï¼Œåœ¨ issue çš„è¯„è®ºå¼€å§‹è¾“å…¥ \u0026lt;!\u0026mdash;\u0026gt; å³å¯ã€‚\n  ä½¿ç”¨ mirror å·¥å…·è‡ªåŠ¨æŠ“å» issues å†…å®¹åˆ° hugo é¡¹ç›®ä¸­ mirror å·¥å…·ä½¿ç”¨ goè¯­è¨€ç¼–å†™ï¼Œç›®å‰æ²¡æœ‰æä¾›ç›´æ¥å¯ç”¨çš„äºŒè¿›åˆ¶åŒ…ï¼Œéœ€è¦ä»æºç å®‰è£…è¿è¡Œã€‚ é…ç½®å¥½ go ç¯å¢ƒåï¼Œå®‰è£…mirror\ngo get -u -v github.com/befovy/mirror\rcd $GOPATH/src/github.com/befovy/mirror\ræŒ‰ç…§ readme ä¸­çš„è¯´æ˜è®¾ç½®æ‰€éœ€é…ç½®æ–‡ä»¶ï¼Œå¹¶è¿è¡Œç¨‹åº\n  å®‰è£… hugo ä¸»é¢˜ åœ¨hugo ä¸»é¢˜ä¸­æŒ‘é€‰ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„é£æ ¼ï¼Œå®‰è£…åˆ°æœ¬åœ°hugoé¡¹ç›®ä¸­ã€‚ è¿™é‡Œå®‰è£… even ä¸»é¢˜ä½œä¸ºç¤ºä¾‹ã€‚ å®‰è£…ä¸»é¢˜åä½¿ç”¨ä¸»é¢˜æä¾›çš„é»˜è®¤hugo é¡¹ç›®é…ç½®\ngit clone https://github.com/olOwOlo/hugo-theme-even themes/even\rcp themes/even/exampleSite/config.toml ./\r  ç”Ÿæˆç½‘ç«™ è¿è¡Œ hugo å‘½ä»¤ç”Ÿæˆé™æ€å†…å®¹ï¼Œæ³¨æ„è¿™é‡Œéœ€è¦è®¾ç½® baseUrlã€‚\nhugo --theme=even --baseUrl=\u0026quot;https://befovy.github.io/\u0026quot;\r  æäº¤è‡³ github ä¸Šä¸€æ­¥å‘½ä»¤ä¸­ä¼šåœ¨ public æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆé™æ€åšå®¢ç½‘ç«™æ‰€éœ€è¦çš„å…¨éƒ¨å†…å®¹ã€‚ å°† public ç›®å½•ä¸­çš„å†…å®¹å…¨éƒ¨æäº¤åˆ°ç¬¬äºŒæ­¥åˆ›å»ºçš„githubä»“åº“å°±å¤§åŠŸå‘Šæˆäº†ã€‚ ğŸ‘\n  å¦‚æœæœ‰å…´è¶£å’Œç²¾åŠ›ï¼Œè¿˜å¯ä»¥ç”¨ github æä¾›çš„ webhooksï¼Œè‡ªè¡Œé…ç½®æœåŠ¡å™¨å¹¶åˆ©ç”¨ hooks è‡ªåŠ¨è§¦å‘è¿™äº›è¿‡ç¨‹çš„æ‰§è¡Œï¼Œå¯å®ç°åšå®¢çš„è‡ªåŠ¨æ›´æ–°ã€‚\n æœ¬æ–‡é€šè¿‡ mirror å’Œ hugo ç”Ÿæˆï¼ŒåŸå§‹åœ°å€ https://github.com/befovy/blogback/issues/6\n ","id":4,"section":"posts","summary":"ä¸€ç›´è§‰å¾— Issue æ˜¯ä¸ªç‰¹åˆ«å¥½ç”¨çš„è®°å½•å·¥å…·ï¼Œçœ‹åˆ°å¾ˆå¤šäººä¹Ÿç›´æ¥æŠŠ Issue ä½œä¸ºä¸ªäººåšå®¢ã€‚ Issue å¯ä»¥ç¢ç‰‡åŒ–çš„è®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç„¶ååœ¨è¿›è¡Œæ•´ç†ï¼Œæœ€ç»ˆå½¢æˆä¸€ç¯‡ä¸é”™çš„åšå®¢å†…å®¹ã€‚","tags":null,"title":"ä½¿ç”¨ mirror å’Œ hugo å®ç° github issue çš„åšå®¢è‡ªåŠ¨åŒæ­¥","uri":"https://blog.befovy.com/2019/06/issue_20190630_6/","year":"2019"}],"tags":[{"title":"Flutter","uri":"https://blog.befovy.com/tags/flutter/"},{"title":"golang","uri":"https://blog.befovy.com/tags/golang/"}]}